<!doctype html><html lang=ko><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-SH0YPW4E1C"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SH0YPW4E1C")</script><meta charset=utf-8><meta name=viewport viewport-fit=cover content="width=device-width"><meta name=HandheldFriendly content="true"><meta name=robots content="index,follow"><link rel=sitemap type=application/xml href=/sitemap.xml><link rel=canonical href=https://jinyongp.dev/learn/nbcamp/7/><meta name=naver-site-verification content="c36f259891f25bc92e3884c1ceb626a0aaa76146"><link rel=alternate type=application/rss+xml href=https://jinyongp.dev/feed.xml title=jinyongp.dev><meta name=author content="jinyongp <dev.jinyongp@gmail.com>"><meta name=keywords content="iOS,내배캠,내일배움캠프,스파르타코딩클럽,nbcamp,swift,uikit"><link rel=manifest href=/manifest.webmanifest><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="jinyongp.dev"><meta name=apple-mobile-web-app-status-bar-style content="default"><meta name=theme-color content="rgb(65, 105, 225)"><meta property="og:site_name" content="jinyongp.dev"><meta property="og:title" content="[내배캠] UIKit 숙련 개인 과제"><meta property="og:type" content="website"><meta property="og:url" content="https://jinyongp.dev/learn/nbcamp/7/"><meta property="og:description" content="UIKit 숙련 과정을 학습하고 To-Do App을 개선해보았습니다."><meta name=description content="UIKit 숙련 과정을 학습하고 To-Do App을 개선해보았습니다."><title>[내배캠] UIKit 숙련 개인 과제</title><link rel=preload href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/styles/nord.min.css as=style><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/styles/nord.min.css><script defer type=module>
    import hljs from "https:\/\/cdn.jsdelivr.net\/gh\/highlightjs\/cdn-release@11.8.0\/build/es/highlight.min.js";
    import dart from "https:\/\/cdn.jsdelivr.net\/gh\/highlightjs\/cdn-release@11.8.0\/build/es/languages/dart.min.js";
    hljs.configure({})
    hljs.registerLanguage("dart", dart);
    hljs.highlightAll();
  </script><script async>"serviceWorker"in navigator&&navigator.serviceWorker.register("/js/sw.js")</script><script async type=module src=/js/main.js></script>
<link rel=icon href=https://jinyongp.dev/favicon.ico><link rel=preload href=https://jinyongp.dev/main.min.css as=style><link rel=stylesheet href=https://jinyongp.dev/main.min.css><link rel=preload href="https://fonts.googleapis.com/css?family=Raleway&amp;display=swap" as=style><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway&amp;display=swap"><style>:root{--accent:65 105 225;--font:Raleway}</style></head><body><nav class=shadow-md><div class="layout flex justify-between text-gray-600"><ul class="flex gap-4 py-4"><li class=hover:text-accent><a title=Home href=/>Home</a></li><li class=hover:text-accent><a title=Posts href=/posts>Posts</a></li><li class=hover:text-accent><a class=text-accent title=Learn href=/learn>Learn</a></li><li class=hover:text-accent><a title=Series href=/series>Series</a></li></ul><ul class="flex gap-4 py-4"><li class="text-xl hover:text-accent grid place-items-center w-5"><a title=square-envelope href=mailto:dev.jinyongp@gmail.com target=_blank rel="noopener noreferrer nofollow"><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7.0 96V416c0 35.3 28.7 64 64 64H384c35.3.0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM218 271.7 64.2 172.4C66 156.4 79.5 144 96 144H352c16.5.0 30 12.4 31.8 28.4L230 271.7c-1.8 1.2-3.9 1.8-6 1.8s-4.2-.6-6-1.8zm29.4 26.9L384 210.4V336c0 17.7-14.3 32-32 32H96c-17.7.0-32-14.3-32-32V210.4l136.6 88.2c7 4.5 15.1 6.9 23.4 6.9s16.4-2.4 23.4-6.9z"/></svg></i></a></li><li class="text-xl hover:text-accent grid place-items-center w-5"><a title=square-velog href=https://velog.io/@jinyongp target=_blank rel="noopener noreferrer nofollow"><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" style="transform:scale(.875)" viewBox="0 0 192 192"><path d="M24 0H168c13.255.0 24 10.7451 24 24V168c0 13.255-10.745 24-24 24H24c-13.2549.0-24-10.745-24-24V24C0 10.7451 10.7451.0 24 0zM49 57.9199V65.48H67l13.6799 77.04L98.5 141.26c17.52-22.2 29.34-38.82 35.46-49.8601C140.2 80.24 143.32 70.9399 143.32 63.5 143.32 59.0601 142 55.7 139.36 53.4199 136.84 51.1399 133.66 50 129.82 50 122.62 50 116.62 53.0601 111.82 59.1799 116.5 62.3 119.68 64.8799 121.36 66.9199c1.8 1.92020000000001 2.7 4.5 2.7 7.74C124.06 80.0601 122.44 86.1799 119.2 93.02 116.08 99.8601 112.66 105.92 108.94 111.2 106.54 114.56 103.48 118.7 99.76 123.62L88.0601 57.2C87.1001 52.3999 84.1001 50 79.0601 50 76.78 50 72.3999 50.96 65.9199 52.8799c-6.48 1.8-12.1199 3.4802-16.9199 5.04z"/></svg></i></a></li><li class="text-xl hover:text-accent grid place-items-center w-5"><a title=square-github href=https://github.com/jinyongp/ target=_blank rel="noopener noreferrer nofollow"><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M4e2 32H48C21.5 32 0 53.5.0 80v352c0 26.5 21.5 48 48 48h352c26.5.0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3.0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1.0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6s-28.4 1.9-41.6 5.6c0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7.0 13.9.2 36.5.2 40.6.0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3.0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4.0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6.0-3.7-1.5s-1.1-3.2.0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3.0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg></i></a></li></ul></div></nav><main><div class=layout><header class=text-center><h1 class="relative mt-16 mb-12 flex justify-center items-center gap-2"><i class="absolute translate-y-[-1.8em] text-base md:text-lg hover:text-accent"><a title="View on GitHub Repository" href=https://github.com/nbcamp/to-do-list target=_blank rel="noopener noreferrer nofollow"><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8.0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8.0-21.5 4.9-32.3 14.6-51.8 45.3.0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8.0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9.0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2.0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8.0-73.5 38.7-73.5 82.6.0 87.8 80.4 101.3 150.4 101.3h48.2c70.3.0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8.0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg></i></a></i>[내배캠] UIKit 숙련 개인 과제</h1><div class="flex justify-between items-center"><div><a href=https://jinyongp.dev/tags/nbcamp><kbd class="text-xs bg-accent text-white rounded px-1 py-0.5">nbcamp</kbd></a>
<a href=https://jinyongp.dev/tags/swift><kbd class="text-xs bg-accent text-white rounded px-1 py-0.5">swift</kbd></a>
<a href=https://jinyongp.dev/tags/uikit><kbd class="text-xs bg-accent text-white rounded px-1 py-0.5">uikit</kbd></a></div><span>Written on Sep 4, 2023</span></div><hr class="my-4 w-full"></header><div class="text-slate-500 grid grid-cols-1 gap-2 md:gap-20 md:grid-cols-2"><div><a title="Previous Series ([내배캠] UIKit 입문 팀 프로젝트)" href=/learn/nbcamp/6/ class="flex flex-col gap-1 border border-current text-current rounded p-2 hover:text-accent"><div class="flex items-center gap-1 [&_span]:font-bold"><i class=mb-0.5><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8.0 45.3l160 160c12.5 12.5 32.8 12.5 45.3.0s12.5-32.8.0-45.3L109.2 288H416c17.7.0 32-14.3 32-32s-14.3-32-32-32H109.3L214.6 118.6c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0l-160 160z"/></svg></i><span>PREV</span></div><span class="truncate whitespace-nowrap">[내배캠] UIKit 입문 팀 프로젝트</span></a></div><div></div></div><hr class=my-4><article class=content><p>이번 7, 8주차에선 UIKit 숙련 과정 개인 과제를 진행했습니다. (2023년 8월 22일 ~ 9월 1일)<br>UIKit의 몇 가지 심화 내용을 학습하고 저번 입문 과제에서 작성했던 To-Do App을 개선했습니다.</p><p>이번 프로젝트의 목표는 아래와 같습니다.</p><ul><li>URLSession을 활용하여 네트워크 통신으로 데이터를 불러옵니다.</li><li>MVC 아키텍처를 이해하고 적용합니다.</li><li>iOS 앱과 UIViewController의 Lifecycle을 이해합니다.</li><li>UserDefaults를 활용하여 데이터를 저장하고 불러옵니다.</li><li>Dependency, 라이브러리, 프레임워크, 모듈에 대해 이해합니다.</li><li>SPM을 사용하여 프로젝트의 의존성 관리를 할 수 있습니다.</li></ul><p>특히나, MVC 아키텍처를 적용하며 많은 고민을 해봤습니다. 어떻게 하면 각 역할에 맞게 코드를 잘 분리하고 데이터나 이벤트 흐름을 관리할 수 있을지 고민하면서 작성했습니다.</p><p><strong>결과 미리보기</strong></p><div class=grid style=grid-template-columns:repeat(4,minmax(0,1fr));gap:.5rem><img class=mx-auto alt="Empty Home Screen" src=/image/learn/nbcamp/7/empty-home.png>
<img class=mx-auto alt="Home Menu" src=/image/learn/nbcamp/7/home-menu.png>
<img class=mx-auto alt="Create New Task" src=/image/learn/nbcamp/7/create-new-task.png>
<img class=mx-auto alt="Color Picker" src=/image/learn/nbcamp/7/color-picker.png>
<img class=mx-auto alt="Collection View" src=/image/learn/nbcamp/7/collection-view.png>
<img class=mx-auto alt="Detail Tasks" src=/image/learn/nbcamp/7/detail-tasks.png>
<img class=mx-auto alt="List View" src=/image/learn/nbcamp/7/list-view.png>
<img class=mx-auto alt="Delete Group" src=/image/learn/nbcamp/7/delete-group.png></div><hr><h2 id=프로젝트-구조 class="flex items-center gap-3">프로젝트 구조 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="프로젝트 구조" href=#%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ea%b5%ac%ec%a1%b0><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h2><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>plaintext</small><pre><code class="hljs language-plaintext">ToDoList/
├── Resources/
├── Models/
├── ViewModels/
├── Services/
├── Views/
│  ├── EditTaskGroup/
│  ├── Shared/
│  ├── TaskGroup/
│  ├── TaskTable/
│  ├── Identifier.swift
│  └── RootView.swift
├── Controllers/
├── Utilities/
└── Info.plist</code></pre></div><h2 id=프로젝트-구현 class="flex items-center gap-3">프로젝트 구현 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="프로젝트 구현" href=#%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ea%b5%ac%ed%98%84><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h2><h3 id=제공하는-기능 class="flex items-center gap-3">제공하는 기능 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="제공하는 기능" href=#%ec%a0%9c%ea%b3%b5%ed%95%98%eb%8a%94-%ea%b8%b0%eb%8a%a5><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><ul><li>할 일 그룹 생성/변경/삭제</li><li>할 일 생성/변경/삭제</li><li>할 일 순서 변경</li><li>할 일 그룹 진행률 표시 (원형 진행바, 애니메이션 적용)</li><li>할 일 그룹 별 랜덤 이미지 설정 (The Dog/Cat API)</li><li>할 일 그룹 별 색상 설정</li><li>CollectionView / TableView 제공</li><li>Color Theme 대응 (Light/Dark)</li></ul><h3 id=mvc-architecture class="flex items-center gap-3">MVC Architecture <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="MVC Architecture" href=#mvc-architecture><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><p>해당 프로젝트는 Model - View - Controller 패턴을 적용하여 구현했습니다.</p><h4 id=model class="flex items-center gap-3">Model <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=Model href=#model><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h4><ul><li>자료구조 및 클래스를 가지고 있는 Model과 ViewModel, 그리고 비즈니스 로직을 가진 Service입니다.</li><li>Models: <code>Codable</code> 프로토콜을 채택한 자료구조를 가집니다. Storage에서 데이터를 불러오고 내보내기 위해 사용합니다.</li><li>ViewModels: Model의 데이터를 가공하여 View에게 전달합니다.<ul><li><a class=underline-lsre href=#publishable><code>Publishable</code></a>을 적용하여 구독자에게 변경사항을 알립니다.</li></ul></li><li>Services: 비즈니스 로직을 담당합니다.<ul><li>APIService: 네트워크 관련 로직을 담당합니다.</li><li>TaskService: <code>ViewModels</code> 데이터를 관리합니다.</li></ul></li></ul><h4 id=view class="flex items-center gap-3">View <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=View href=#view><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h4><ul><li>View는 사용자에게 보여지는 UI를 구성합니다.</li><li><code>RootView</code><ul><li>Controller와 1:1 관계로 연결되는 View입니다. <code>TypedViewController</code>에게 전달됩니다.</li><li>프로토콜로서 <code>initializeUI()</code>를 필수로 구현해야 합니다.</li></ul></li><li>그 외 View는 <code>RootView</code>에서 사용하는 하위 View입니다.</li><li>Model의 변경사항을 구독하고 있으며, 구독 중인 속성이 변경되면 UI를 변경합니다. (<a class=underline-lsre href=#publishable><code>Publishable</code></a>)</li><li>특정 이벤트가 발생하면 Controller에게 이를 알립니다. (<a class=underline-lsre href=#eventbus><code>EventBus</code></a>)</li></ul><h4 id=controller class="flex items-center gap-3">Controller <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=Controller href=#controller><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h4><ul><li>Controller는 View를 생성하고 연결합니다. 연결된 View는 <code>typedView</code> 속성을 통해 접근할 수 있습니다.</li><li><a class=underline-lsre href=#eventbus><code>EventBus</code></a>에 View에서 발생하는 모든 이벤트를 등록합니다. (<code>ViewControllerEvents</code>, <code>RootViewController</code>)</li><li>등록된 이벤트가 발생했을 때 Model에게 데이터 변경을 요청할 수 있습니다.</li></ul><h3 id=scenarios class="flex items-center gap-3">Scenarios <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=Scenarios href=#scenarios><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><h4 id=사용자가-앱을-접속했을-때 class="flex items-center gap-3">사용자가 앱을 접속했을 때 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="사용자가 앱을 접속했을 때" href=#%ec%82%ac%ec%9a%a9%ec%9e%90%ea%b0%80-%ec%95%b1%ec%9d%84-%ec%a0%91%ec%86%8d%ed%96%88%ec%9d%84-%eb%95%8c><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h4><pre class=mermaid>---
title: MVC Architecture Sequence Diagram
---

sequenceDiagram

participant User
participant Controller
participant View
participant Model
participant Storage

Note over Model: Publishable

autonumber

User->>Controller: Open app & Request UI
Controller->>View: Create & Connect (1:1 Relationship)
View->>Model: Subscribe data changes
Storage-->>Model: Load data (if exists)
Controller->>+Model: Request data
Model->>Model: Processing (to cause changes)
Model-->>-View: Publish data
View->>Controller: Build UI
Controller->>User: Display
</pre><ol><li>User가 앱을 실행하고 UI를 요청하면,<ol><li>Controller가 View를 생성하고 자신에게 연결합니다. (<code>TypedViewController</code>)</li><li>View를 생성하는 단계에서 Model의 변경사항을 구독합니다. (<a class=underline-lsre href=#publishable>Publishable</a>)</li><li>Storage로부터 데이터를 불러와 Model을 준비합니다.</li></ol></li><li>Controller는 UI를 그리기 위해 필요한 데이터를 Model에 요청합니다.</li><li>Model은 필요한 데이터를 정리하여 View에게 발행합니다. View는 이를 토대로 UI를 구축합니다.</li><li>View와 연결된 Controller를 통해서 사용자에게 UI를 보여줍니다.</li></ol><h4 id=사용자가-ui를-조작했을-때 class="flex items-center gap-3">사용자가 UI를 조작했을 때 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="사용자가 UI를 조작했을 때" href=#%ec%82%ac%ec%9a%a9%ec%9e%90%ea%b0%80-ui%eb%a5%bc-%ec%a1%b0%ec%9e%91%ed%96%88%ec%9d%84-%eb%95%8c><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h4><pre class=mermaid>---
title: MVC Architecture Sequence Diagram
---

sequenceDiagram

participant User
participant View
participant EventBus
participant Controller
participant Model
participant Storage

Note over Model: Publishable

autonumber

Controller->>EventBus: Register callback for events
User->>View: Do specific actions
View->>+EventBus: Emit events (with data)
EventBus-->>-Controller: Run callback for the event
Controller->>+Model: Request CRUD
Model->>Model: Processing (to cause changes)
Model-->>Storage: Save data (if exists)
Model-->>-View: Publish changes with data
View->>User: Update UI & Display
</pre><ol><li>Controller가 생성되는 과정에서 특정 이벤트에 실행할 동작을 정의합니다. (<a class=underline-lsre href=#eventbus>EventBus</a>)</li><li>User가 View를 통해 특정 행동을 수행하면 EventBus에 등록된 이벤트를 발행합니다.</li><li>해당 이벤트를 구독 중인 Controller는 이벤트를 받아 데이터 생성/변경/삭제를 Model에게 요청합니다.</li><li>Model은 요청에 맞게 데이터를 적절히 처리한 후, 변환하여 Storage에 저장합니다.</li><li>Model은 변경사항을 데이터와 함께 구독 중인 View에게 알립니다. View는 이를 토대로 UI를 변경합니다.</li><li>View와 연결된 Controller를 통해서 사용자에게 UI를 보여줍니다.</li></ol><h2 id=api-references class="flex items-center gap-3">API References <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title="API References" href=#api-references><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h2><h3 id=publishable class="flex items-center gap-3">Publishable <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=Publishable href=#publishable><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><p>속성값의 변경사항을 구독자에게 자동으로 알려주는 Property Wrapper 클래스입니다.</p><blockquote><p>내부적으로 <code>self</code>에 대한 참조를 <a class=underline-lsre href=#weakref><code>WeakRef</code></a>로 관리하고 있으므로, 메모리 해제 시 자동으로 구독을 해제합니다.</p></blockquote><p><strong>API</strong></p><ul><li><code>Publishable</code>: 값의 변화를 구독자에게 알려주는 Property Wrapper 클래스입니다.</li><li><code>Publisher</code>: 발행자를 나타냅니다. <code>Publishable</code>을 적용한 속성의 타입입니다.</li><li><code>Subscriber</code>: 구독자를 나타냅니다. <code>Publishable</code>을 구독하는 타입입니다.</li><li><code>Changes</code>: 값의 변화를 나타냅니다. 변경이전 값 <code>old</code>와 변경된 값 <code>new</code>를 가집니다.</li></ul><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">/// 구독자를 추가합니다. (immediate을 true로 설정하면 구독 즉시 이벤트를 발행합니다)
/// 이미 구독 중인 경우, 기존 구독을 취소하고 새로운 구독을 추가합니다.
func subscribe&lt;Subscriber&gt;(by: Subscriber, immediate: Bool, EventCallback&lt;Subscriber&gt;)

/// 주어진 구독자의 구독을 취소합니다.
func unsubscribe&lt;Subscriber&gt;(by: Subscriber)

/// 구독자에게 변경 사항을 발행합니다. nil을 전달하면 현재 값으로 발행합니다.
func publish(Changes?)</code></pre></div><p><strong>Example</strong></p><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">final class MyModel {
    @Publishable var name: String

    init(name: String) {
        self.name = name
    }
}

final class Main {
    static let shared = Main()
    private init() {}

    func run() {
        let model = MyModel(name: &#34;Old Model&#34;)

        model.$name.subscribe(by: self, immediate: true) { (subscriber, changes) in
            // 강한 순환 참조를 피하기 위해 self 대신 subscriber를 사용합니다.
            print(&#34;Old Name: \(changes.old), New Name: \(changes.new)&#34;)
        }
        
        model.name = &#34;New Model&#34;  // 구독자에게 변경을 알립니다.
    }
}

Main.shared.run()

// 출력 결과
// Old Name: Old Model, New Name: Old Model
// Old Name: Old Model, New Name: New Model</code></pre></div><h3 id=eventbus class="flex items-center gap-3">EventBus <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=EventBus href=#eventbus><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><p>이벤트를 관리하며, 구독 및 발행 기능을 제공합니다. 이벤트 기반의 프로그래밍 패턴을 제공합니다.</p><blockquote><p>내부적으로 <code>self</code>에 대한 참조를 <a class=underline-lsre href=#weakref><code>WeakRef</code></a>로 관리하고 있으므로, 메모리 해제 시 자동으로 구독을 해제합니다.</p></blockquote><p><strong>API</strong></p><ul><li><code>EventBus</code>: 이벤트를 구독 및 발행할 수 있는 싱글턴 클래스입니다.</li><li><code>EventProtocol</code>: 이벤트를 나타내는 프로토콜입니다. <code>Payload</code> 연관 타입을 가집니다.</li><li><code>Emitter</code>: 이벤트를 발행할 수 있는 타입입니다.</li><li><code>Listener</code>: 이벤트를 구독할 수 있는 타입입니다.</li></ul><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">/// 주어진 이벤트를 구독합니다.
func on&lt;Listener, Event: EventProtocol&gt;(Event.Type, by: Listener, EventCallback&lt;Listener, Event&gt;) 

/// 주어진 구독자의 이벤트 구독을 취소합니다.
func off&lt;Listener, Event: EventProtocol&gt;(Event, by: Listener) 

/// 주어진 구독자의 모든 구독을 취소합니다.
func reset&lt;Listener&gt;(Listener)

/// 주어진 이벤트를 발행합니다.
func emit&lt;Event: EventProtocol&gt;(Event) </code></pre></div><p><strong>Example</strong></p><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">final class Main {
    static let shared = Main()
    private init() {}
    
    func run() {
        struct MyEvent: EventProtocol {
            struct Payload {
                let text: String
            }

            let payload: Payload
        }

        // 이벤트 구독
        EventBus.shared.on(MyEvent.self, by: self) { (listener, payload) in
            // 강한 순환 참조를 피하기 위해 self 대신 listener를 사용합니다.
            print(&#34;Payload: \(payload.text)&#34;)
        }

        // 이벤트 발행
        EventBus.shared.emit(MyEvent(payload: .init(text: &#34;Hello, World!&#34;)))
    }
}

Main.shared.run()

// 출력 결과
// Payload: Hello, World!</code></pre></div><h3 id=weakref class="flex items-center gap-3">WeakRef <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=WeakRef href=#weakref><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><p><code>weak</code> 참조를 감싸는 구조체입니다.</p><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">struct WeakRef&lt;T: AnyObject&gt; {
    weak var value: T?
    init(_ value: T?) {
        self.value = value
    }
}</code></pre></div><h3 id=storage class="flex items-center gap-3">Storage <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=Storage href=#storage><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h3><p>데이터를 (영속적으로) 저장하고, 불러오는 기능을 제공하는 타입이 채택하는 프로토콜입니다.</p><p>현재 <code>UserDefaultsStorage</code>를 제공합니다.</p><div class="relative rounded-md overflow-hidden my-4 group"><small class="absolute top-0 right-0 bg-black/30 capitalize font-black text-xs text-white rounded-bl-md px-2 py-1 transition-opacity opacity-0 group-hover:opacity-100"><span class=sr-only>Language:</span>swift</small><pre><code class="hljs language-swift">protocol Storage {
    static var shared: Self { get }

    func save&lt;T: Encodable&gt;(_ object: T, forKey key: String)
    func load&lt;T: Decodable&gt;(forKey key: String) -&gt; T?
    func remove(forKey key: String)
}</code></pre></div><hr><h2 id=회고 class="flex items-center gap-3">회고 <i class="transition opacity-10 hover:opacity-100 text-[0.8em] scale-90 hover:scale-100 -rotate-45 hover:-rotate-90"><a title=회고 href=#%ed%9a%8c%ea%b3%a0><i><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512"><path d="M0 160v96C0 379.7 100.3 480 224 480s224-100.3 224-224V160H320v96c0 53-43 96-96 96s-96-43-96-96V160H0zm0-32H128V64c0-17.7-14.3-32-32-32H32C14.3 32 0 46.3.0 64v64zm320 0H448V64c0-17.7-14.3-32-32-32H352c-17.7.0-32 14.3-32 32v64z"/></svg></i></a></i></h2><p>이번 개인 과제를 진행하면서 MVC 아키텍처에 대해 많은 경험을 해볼 수 있었습니다. UIKit에서 View와 Controller를 어떻게 분리할 수 있을지, 그리고 View에서 사용자 입력이 발생했을 때 Controller에게 어떻게 알려줄 수 있을지, 그리고 Model에서 데이터가 변경되었을 때 View에게 어떻게 알려줄 수 있을지 고민하면서 여러 시도를 해보았습니다. 이러한 문제를 해결하기 위해 <code>TypedViewController</code>, <code>EventBus</code> 그리고 <code>Publishable</code>을 구현하고 프로젝트에 적용해보았는데요. 확실히 디자인 패턴이 문제를 해결하는데 도움을 주고 또 꽤 효율적이라고 느낄 수 있었습니다.</p><p>아쉬운 점은 튜터님께서 피드백을 주신대로 <code>EventBus</code>의 이벤트를 하나의 파일에서 관리한 부분이었습니다. 다음 팀 프로젝트에서는 이러한 문제를 개선하고 보다 더 나은 MVC 아키텍처를 적용해보려고 합니다.</p></article><script src=https://giscus.app/client.js data-repo=jinyongp/jinyongp.dev data-repo-id=R_kgDOHJDtcg data-category=Comments data-category-id=DIC_kwDOHJDtcs4CXf7o data-mapping=title data-strict=0 data-reactions-enabled=0 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=ko crossorigin=anonymous async></script><div class=h-24></div><script type=module>
          import mermaid from "https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs";
          mermaid.initialize({ startOnLoad: true });
        </script></div></main><footer class="absolute bottom-0 w-full"><div class="flex justify-center py-8"><p class="[&_a]:text-accent text-center text-sm">Copyright 2023. Jinyong Park. All rights reserved.<br><span class=text-xs>Powered by
<a title="Go to Hugo Site" href=https://gohugo.io target=_blank rel="noopener noreferrer nofollow">Hugo</a>
| Developed on
<a title="Go to Github Repo" href=https://github.com/jinyongp/jinyongp.github.io target=_blank rel="noopener noreferrer nofollow">Here</a></span></p></div></footer><div id=js-scroll-back-to-top class="back-to-top hide"><i class=text-accent><svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512"><path d="M288 0c17.7.0 32 14.3 32 32V49.7C451.8 63.4 557.7 161 573.9 285.9c2 15.6-17.3 24.4-27.8 12.7C532.1 283 504.8 272 480 272c-38.7.0-71 27.5-78.4 64.1-1.7 8.7-8.7 15.9-17.6 15.9s-15.8-7.2-17.6-15.9C359 299.5 326.7 272 288 272s-71 27.5-78.4 64.1c-1.7 8.7-8.7 15.9-17.6 15.9s-15.8-7.2-17.6-15.9C167 299.5 134.7 272 96 272c-24.8.0-52.1 11-66.1 26.7C19.4 310.4.1 301.5 2.1 285.9 18.3 161 124.2 63.4 256 49.7V32c0-17.7 14.3-32 32-32zm0 304c12.3.0 23.5 4.6 32 12.2V430.6c0 45-36.5 81.4-81.4 81.4-30.8.0-59-17.4-72.8-45l-2.3-4.7c-7.9-15.8-1.5-35 14.3-42.9s35-1.5 42.9 14.3l2.3 4.7c3 5.9 9 9.6 15.6 9.6 9.6.0 17.4-7.8 17.4-17.4V316.2c8.5-7.6 19.7-12.2 32-12.2z"/></svg></i></div></body></html>