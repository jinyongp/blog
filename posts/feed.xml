<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on jinyongp.dev</title><link>https://jinyongp.dev/posts/</link><description>Recent content in Posts on jinyongp.dev</description><generator>Hugo -- gohugo.io</generator><language>ko</language><managingEditor>dev.jinyongp@gmail.com (Jinyong Park)</managingEditor><webMaster>dev.jinyongp@gmail.com (Jinyong Park)</webMaster><copyright>Copyright 2023. Jinyong Park. All rights reserved.</copyright><lastBuildDate>Fri, Apr 22 14:18:15 2022 +0000</lastBuildDate><atom:link href="https://jinyongp.dev/posts/feed.xml" rel="self" type="application/rss+xml"/><item><title>Refactoring for Performance (Canvas API)</title><link>https://jinyongp.dev/posts/d3js/4/</link><pubDate>Fri, Apr 22 14:18:15 2022 +0000</pubDate><author>dev.jinyongp@gmail.com (Jinyong Park)</author><guid>https://jinyongp.dev/posts/d3js/4/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ì€ ì „ë¶€ êµ¬í˜„í•´ë³´ì•˜ì§€ë§Œ, &lt;code>svg&lt;/code> ìš”ì†Œì˜ ê°œìˆ˜ê°€ ì¦ê°€í• ìˆ˜ë¡ ì„±ëŠ¥ì´ í•˜ë½í•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. 50ê°œì˜ &lt;code>nodes&lt;/code>ì— ëŒ€í•´ DevToolsë¡œ ì¸¡ì •í•´ë³¸ ê²°ê³¼, ë Œë”ë§ ì—°ì‚°ì— êµ‰ì¥íˆ ë§ì€ CPU, GPU ì‘ì—…ì„ í•„ìš”ë¡œ í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://jinyongp.dev/image/d3-force-svg-50-performance.png" alt="SVG 50 Performance">&lt;/p>
&lt;p>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ &lt;a
class="underline-lsre"
href="https://developer.mozilla.org/ko/docs/Web/API/Canvas_API"
target="_blank" rel="noopener noreferrer nofollow"
>Canvas API&lt;/a
>
ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Canvas APIë¥¼ ì´ìš©í•˜ë©´ d3-selectionì„ ë‹¤ë£° ì¼ì€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. íŠ¹íˆë‚˜ ì´ë²ˆì²˜ëŸ¼ ë‹¨ìˆœíˆ ì›ê³¼ ì„ ë§Œ ê·¸ë¦¬ë©´ ë˜ëŠ” ì‘ì—…ì—ì„œëŠ” ê·¸ë¦¬ê¸° ë”ìš± ì‰½ìŠµë‹ˆë‹¤. ëŒ€ì‹  zoomê³¼ dragëŠ” êµ¬í˜„ ë°©ì‹ì— ì°¨ì´ê°€ ìˆì–´ ë‹¤ì†Œ ì–´ë ¤ìš´ ì ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ ë°”ë¡œ ì½”ë“œì™€ í•¨ê»˜ ì €ë²ˆ ì‹œê°„ì— ì‘ì„±í•œ ë‚´ìš©ì„ Canvas APIë¡œ ë¦¬íŒ©í† ë§í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ ì‹œë¦¬ì¦ˆì—ì„  ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ì™„ì„±í–ˆë˜ &lt;code>network&lt;/code> classë¥¼ ì´ìš©í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="drawing-canvas">Drawing Canvas&lt;/h2>
&lt;p>Canvas APIëŠ” ë§ ê·¸ëŒ€ë¡œ &lt;a
class="underline-lsre"
href="https://ko.wikipedia.org/wiki/%EC%BA%94%EB%B2%84%EC%8A%A4"
target="_blank" rel="noopener noreferrer nofollow"
>ìº”ë²„ìŠ¤&lt;/a
>
ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ ìœ„ì— ê·¸ë¦¼ì„ ê·¸ë¦¬ê³  ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤ë©´ ì „ë¶€ ì§€ìš°ê³  ë‹¤ì‹œ ê·¸ë¦¬ë©´ ë©ë‹ˆë‹¤. ì• ë‹ˆë©”ì´ì…˜ì´ë¼ë©´ ë§¤ í”„ë ˆì„ë§ˆë‹¤ ì§€ìš°ê³  ê·¸ë¦¬ê¸°ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ d3-force ë˜í•œ ë§¤ í‹±ë§ˆë‹¤ ë°˜ë³µí•˜ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>d3.jsì— ëŒ€í•´ì„œ ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë£¨ëŠ” í”„ë¡œì íŠ¸ì´ë¯€ë¡œ Canvas APIì— ëŒ€í•´ ìì„¸í•œ ì–¸ê¸‰ì€ ì—†ìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•œ ë‚´ìš©ì€ &lt;a
class="underline-lsre"
href="https://developer.mozilla.org/ko/docs/Web/API/Canvas_API"
target="_blank" rel="noopener noreferrer nofollow"
>ê³µì‹ ë¬¸ì„œ&lt;/a
>
ë¥¼ ì°¸ê³  ë°”ëë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>Svg ë°©ì‹ì—ì„œëŠ” &lt;code>svg&lt;/code> ìš”ì†Œë¥¼ ìƒì„±í•˜ê³  &lt;code>tick&lt;/code>ì—ì„œ ìœ„ì¹˜ë¥¼ ë³€ê²½í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. Canvas ë°©ì‹ì—ì„  ê·¸ëƒ¥ ê·¸ë ¤ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ &lt;code>canvas&lt;/code>ì™€ &lt;code>ctx&lt;/code>ë¥¼ ìƒì„±í•˜ê³  &lt;code>tick&lt;/code> ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•´ë´…ì‹œë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">class network {
constructor() {
this.canvas = d3.select(&amp;quot;body&amp;quot;)
.append(&amp;quot;canvas&amp;quot;)
.attr(&amp;quot;width&amp;quot;, this.size.w)
.attr(&amp;quot;height&amp;quot;, this.size.h)
.style(&amp;quot;display&amp;quot;, &amp;quot;block&amp;quot;);
this.ctx = this.canvas.node().getContext(&amp;quot;2d&amp;quot;);
this.nodeRadius = 8;
this.simulation = d3
.forceSimulation()
.on(&amp;quot;tick&amp;quot;, this.drawCanvas.bind(this));
}
drawCanvas() {
this.ctx.clearRect(0, 0, this.size.w, this.size.h);
this.ctx.save();
this.drawLinks();
this.drawNodes();
this.ctx.restore();
}
drawNodes() {
console.log(&amp;quot;Drawing Nodes!&amp;quot;);
}
drawLinks() {
console.log(&amp;quot;Drawing Links!&amp;quot;);
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>drawCanvas()&lt;/code>, &lt;code>drawNodes()&lt;/code> ê·¸ë¦¬ê³  &lt;code>drawLinks()&lt;/code> í•¨ìˆ˜ ë‚´ì—ì„  ì´ì œ d3-selection ì—†ì´ &lt;code>ctx&lt;/code>ë§Œìœ¼ë¡œ ê·¸ë¦¼ì„ ê·¸ë¦½ë‹ˆë‹¤. ë¨¼ì € &lt;a
class="underline-lsre"
href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/clearRect"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>ctx.clearRect()&lt;/code>&lt;/a
>
ë¡œ &lt;code>canvas&lt;/code>ë¥¼ ì „ë¶€ ì§€ì›Œì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>drawNodes()&lt;/code>ì™€ &lt;code>drawLinks()&lt;/code>ë¥¼ í˜¸ì¶œí•˜ì—¬ &lt;code>nodes&lt;/code>ì™€ &lt;code>links&lt;/code>ë¥¼ ê·¸ë ¤ì¤ë‹ˆë‹¤. ì´ ë•Œ, &lt;code>links&lt;/code>ë¥¼ ë¨¼ì € ê·¸ë ¤ì¤˜ì•¼ë§Œ &lt;code>nodes&lt;/code> ë’¤ì— ê·¸ë ¤ì§‘ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>links&lt;/code>ëŠ” êµ‰ì¥íˆ ê°„ë‹¨í•˜ê²Œ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;code>links&lt;/code>ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ì„ ì„ ê·¸ë ¤ì¤ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">drawLinks() {
this.links.forEach(({ source, target }) =&amp;gt; {
this.ctx.beginPath();
this.ctx.moveTo(source.x, source.y);
this.ctx.lineTo(target.x, target.y);
this.ctx.stroke();
});
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>nodes&lt;/code>ëŠ” ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ê·¸ë ¸ë˜ ê²ƒì²˜ëŸ¼ ì› ì¤‘ì•™ì— &lt;code>id&lt;/code>ê°€ ìœ„ì¹˜í•˜ë„ë¡ ì‘ì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">drawNodes() {
this.nodes.forEach(({ id, x, y }) =&amp;gt; {
this.ctx.beginPath();
this.ctx.arc(x, y, this.nodeRadius, 0, 2 * Math.PI);
this.ctx.lineWidth = 3;
this.ctx.strokeStyle = &amp;quot;blue&amp;quot;;
this.ctx.stroke();
this.ctx.fillStyle = &amp;quot;#fff&amp;quot;;
this.ctx.fill();
this.ctx.textAlign = &amp;quot;center&amp;quot;;
this.ctx.textBaseline = &amp;quot;middle&amp;quot;;
this.ctx.fillStyle = &amp;quot;#000&amp;quot;;
this.ctx.fillText(id, x, y);
});
}
&lt;/code>&lt;/pre>
&lt;p>d3-selection ì—†ì´ ì˜¤ë¡œì§€ canvasë§Œ ì´ìš©í•˜ë¯€ë¡œ ì‰½ê²Œ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="panning-and-zooming">Panning and Zooming&lt;/h2>
&lt;p>d3-zoomì„ ì—°ê²°í•´ì„œ í™”ë©´ì„ ì´ë™í•˜ê³  í™•ëŒ€, ì¶•ì†Œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤. Svg ë°©ì‹ì—ì„  ìš”ì†Œì˜ &lt;code>transform&lt;/code> ì†ì„±ì„ ë³€ê²½í•˜ì—¬ ì§ì ‘ ì´ë™í–ˆë‹¤ë©´, canvas ë°©ì‹ì—ì„  ì „ë¶€ ì§€ìš°ê³  ìœ„ì¹˜ ì´ë™ í›„ ë‹¤ì‹œ ê·¸ë ¤ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">class network {
constructor() {
this.transform = d3.zoomIdentity;
this.zoom = d3.zoom()
.scaleExtent([0.1, 5])
.on('zoom', ({ transform }) =&amp;gt; {
this.transform = transform;
this.drawCanvas();
});
this.canvas.call(this.zoom);
}
drawCanvas() {
this.ctx.clearRect(0, 0, this.size.w, this.size.h);
this.ctx.save();
this.ctx.translate(this.transform.x, this.transform.y);
this.ctx.scale(this.transform.k, this.transform.k);
this.drawLinks();
this.drawNodes();
this.ctx.restore();
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom#zoomIdentity"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>d3.zoomIdentity&lt;/code>&lt;/a
>
ëŠ” &lt;code>{ k: 1, x: 0, y: 0 }&lt;/code>ì¸ ê°ì²´ì…ë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•´ &lt;code>transform&lt;/code> ë³€ìˆ˜ë¥¼ ìƒì„±í•œ ë’¤, &lt;code>zoom&lt;/code> ì´ë²¤íŠ¸ë¡œ ì–»ì€ &lt;code>transform&lt;/code>ì„ ì €ì¥í•©ë‹ˆë‹¤. ê·¸ í›„, &lt;code>drawCanvas()&lt;/code>ë¥¼ í˜¸ì¶œí•˜ì—¬ &lt;code>ctx.translate()&lt;/code>ì™€ &lt;code>ctx.scale()&lt;/code> í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë³€ê²½í•œ ìœ„ì¹˜ì— ê·¸ë¦¬ë„ë¡ í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="focusing">Focusing&lt;/h2>
&lt;p>íŠ¹ì • ìš”ì†Œë¥¼ í´ë¦­í–ˆì„ ë•Œ, í•´ë‹¹ ìš”ì†Œë¥¼ í¬ì»¤ì‹±í•˜ëŠ” ë™ì‘ì„ êµ¬í˜„í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. CanvasëŠ” ê°œë³„ ìš”ì†Œë¥¼ ì„ íƒí•  ìˆ˜ ì—†ì–´ì„œ ìš”ì†Œì— ì»¤ì„œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ê±°ë‚˜ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì ìš©í•˜ëŠ”ë° ì–´ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, d3.jsì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì˜ ì¡°í•©ìœ¼ë¡œ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ê°œë³„ ìš”ì†Œê°€ ì•„ë‹Œ &lt;code>canvas&lt;/code> ìì²´ì— í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ì–»ì€ &lt;code>event&lt;/code>ë¡œë¶€í„° í´ë¦­ ì¢Œí‘œë¥¼ ì–»ì–´ í•´ë‹¹ ìœ„ì¹˜ì— ì¡´ì¬í•˜ëŠ” &lt;code>node&lt;/code>ë¥¼ ì°¾ê³ , í•´ë‹¹ &lt;code>node&lt;/code>ë¡œ ì´ë™í•˜ê³  í™•ëŒ€í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">class network {
constructor() {
this.canvas.on(&amp;quot;click&amp;quot;, ({ x, y }) =&amp;gt; {
const node = this.findNode(x, y);
if (!node) return;
this.canvas
.transition()
.duration(500)
.call(this.zoom.translateTo, node.x, node.y)
.transition()
.call(this.zoom.scaleTo, 3);
});
}
findNode(x, y) {
const [ix, iy] = this.transform.invert([x, y]);
return this.simulation.find(ix, iy, this.nodeRadius);
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>canvas&lt;/code>ì— &lt;code>click&lt;/code> ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•˜ì—¬ &lt;code>event&lt;/code> ê°ì²´ë¡œë¶€í„° í´ë¦­í•œ ìœ„ì¹˜ì¸ &lt;code>x&lt;/code>, &lt;code>y&lt;/code> ì¢Œí‘œë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>findNode()&lt;/code> ë©”ì„œë“œëŠ” ì£¼ì–´ì§„ ì¢Œí‘œì— &lt;code>node&lt;/code>ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  í•´ë‹¹ &lt;code>node&lt;/code>ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom#transform_invert"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>transform.invert()&lt;/code>&lt;/a
>
ëŠ” ì£¼ì–´ì§„ ì ˆëŒ€ ì¢Œí‘œì— í˜„ì¬ &lt;code>transform&lt;/code> ì¢Œí‘œê°’ì„ í¬í•¨í•˜ì—¬ ê³„ì‚°í•˜ê³  ë°˜í™˜í•©ë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•´ì•¼ë§Œ ë³€ê²½ëœ &lt;code>transform&lt;/code>ì„ ì ìš©í•œ ì¢Œí‘œë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#simulation_find"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>simulation.find()&lt;/code>&lt;/a
>
ëŠ” ì£¼ì–´ì§„ ì¢Œí‘œì—ì„œ ê°€ì¥ ê°€ê¹Œì´ì— ìœ„ì¹˜í•œ &lt;code>node&lt;/code>ë¥¼ ê²€ìƒ‰í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. &lt;code>node&lt;/code>ì˜ ë°˜ì§€ë¦„ì„ ì œê³µí•˜ì—¬ í•´ë‹¹ ìš”ì†Œë¥¼ í´ë¦­í•´ì•¼ë§Œ &lt;code>node&lt;/code>ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>node&lt;/code>ë¥¼ ì°¾ì•˜ë‹¤ë©´, &lt;code>zoom.translate&lt;/code>ë¡œ í•´ë‹¹ &lt;code>node&lt;/code> ìœ„ì¹˜ë¡œ ì´ë™í•œ í›„ í™•ëŒ€í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="dragging">Dragging&lt;/h2>
&lt;p>d3-dragë¥¼ ì—°ê²°í•˜ì—¬ ìš”ì†Œë¥¼ ë“œë˜ê·¸í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. Svg ë°©ì‹ì—ì„œëŠ” &lt;code>circles&lt;/code>ì— dragë¥¼ ë¶€ì°©í•˜ì—¬ ëª¨ë“  ìš”ì†Œì— ëŒ€í•´ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í–ˆìŠµë‹ˆë‹¤. Canvas ë°©ì‹ì—ì„œëŠ” ê·¸ëŸ° ë°©ë²•ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, &lt;code>canvas&lt;/code>ì— ë“±ë¡í•˜ë©´ì„œ ë™ì‹œì— í´ë¦­í•œ ìš”ì†Œë¥¼ ê²€ìƒ‰í•˜ëŠ” &lt;code>subject&lt;/code>ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">class network {
constructor() {
this.drag = d3
.drag()
.subject(({ x, y }) =&amp;gt; this.findNode(x, y))
.on(&amp;quot;start&amp;quot;, () =&amp;gt; {
this.canvas.style(&amp;quot;cursor&amp;quot;, &amp;quot;grabbing&amp;quot;);
this.simulation.alphaTarget(0.1).restart();
})
.on(&amp;quot;drag&amp;quot;, (event) =&amp;gt; {
const [x, y] = d3.pointer(event);
event.subject.fx = this.transform.invertX(x);
event.subject.fy = this.transform.invertY(y);
})
.on(&amp;quot;end&amp;quot;, ({ subject }) =&amp;gt; {
this.canvas.style(&amp;quot;cursor&amp;quot;, &amp;quot;default&amp;quot;);
this.simulation.alphaTarget(0);
subject.fx = null;
subject.fy = null;
});
this.canvas.call(this.drag);
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-drag#drag_subject"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>drag.subject()&lt;/code>&lt;/a
>
ëŠ” ë“œë˜ê·¸í•˜ë ¤ëŠ” ì£¼ì²´ &lt;code>node&lt;/code>ë¥¼ ì„ íƒí•  ë•Œ ì´ìš©í•©ë‹ˆë‹¤. &lt;code>findNode()&lt;/code> í•¨ìˆ˜ë¡œ ê²€ìƒ‰í•œ &lt;code>node&lt;/code>ë¥¼ &lt;code>subject&lt;/code>ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. ì„¤ì • ì´í›„, &lt;code>event&lt;/code> ê°ì²´ì—ì„œ &lt;code>subject&lt;/code> propertyì— ì„ íƒí•œ &lt;code>node&lt;/code>ê°€ ë“±ë¡ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>Drag ì´ë²¤íŠ¸ì— ë“±ë¡í•œ í•¨ìˆ˜ëŠ” &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-drag#drag-events"
target="_blank" rel="noopener noreferrer nofollow"
>ì²« ë²ˆì§¸ ì¸ìë¡œ &lt;code>event&lt;/code> ê°ì²´&lt;/a
>
ë¥¼ ê°€ì§‘ë‹ˆë‹¤. Canvas ë°©ì‹ì˜ ê²½ìš° ê°œë³„ ìš”ì†Œê°€ ì•„ë‹Œ canvasì— ë“±ë¡ë˜ì—ˆê¸° ë•Œë¬¸ì— &lt;code>event.x&lt;/code>ì™€ &lt;code>event.y&lt;/code>ì˜ ê°’ì´ canvas ê¸°ì¤€ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤. í´ë¦­ ìœ„ì¹˜ ê¸°ë°˜ìœ¼ë¡œ ì¢Œí‘œë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ &lt;code>event.sourceEvent&lt;/code> ê°ì²´ë¥¼ ì´ìš©í•´ì•¼í•˜ë¯€ë¡œ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-selection#pointer"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>d3.pointer()&lt;/code>ë¥¼ ì´ìš©&lt;/a
>
í•´ ì¢Œí‘œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>transform&lt;/code>ì„ ì ìš©í•˜ì—¬ &lt;code>subject&lt;/code>ì˜ ê³ ì • ì¢Œí‘œë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>start&lt;/code>ì™€ &lt;code>end&lt;/code> ì´ë²¤íŠ¸ì—ì„œ &lt;code>cursor&lt;/code> ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ìš”ì†Œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œë„ ìŠ¤íƒ€ì¼ì„ ë³€ê²½í•´ì£¼ê¸° ìœ„í•´ &lt;code>pointermove&lt;/code> ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">class network {
constructor() {
this.canvas.on(&amp;quot;pointermove&amp;quot;, ({ x, y, buttons }) =&amp;gt; {
if (buttons) return;
const node = this.findNode(x, y);
this.canvas.style(&amp;quot;cursor&amp;quot;, node ? &amp;quot;pointer&amp;quot; : &amp;quot;default&amp;quot;);
});
}
}
&lt;/code>&lt;/pre>
&lt;p>&lt;code>event.buttons&lt;/code>ëŠ” í˜„ì¬ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•œ ìƒíƒœì¸ì§€ íŒë³„í•˜ì—¬ ë“œë˜ê·¸ ì¤‘ì¼ ë• ë¬´ì‹œí•˜ë„ë¡ í•©ë‹ˆë‹¤. &lt;code>node&lt;/code>ê°€ ìœ„ì¹˜í•˜ëŠ” ê³³ì—ì„œë§Œ &lt;code>pointer&lt;/code> ìŠ¤íƒ€ì¼ì„ ê°–ë„ë¡ í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="impl">Impl.&lt;/h2>
&lt;p>ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ì‘ì„±í•œ ì½”ë“œë¥¼ Canvasë¡œ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ì œ ìš”ì†Œì˜ ê°œìˆ˜ë¥¼ ë§ì´ ì¶”ê°€í•˜ë”ë¼ë„ ì„±ëŠ¥ í•˜ë½ì˜ ëª¨ìŠµì„ ë³´ì´ì§€ ì•ŠëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p class="codepen" data-height="600" data-default-tab="result" data-slug-hash="qBpwbbR" data-editable="true" data-user="jinyongp" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
&lt;span>See the Pen &lt;a href="https://codepen.io/jinyongp/pen/qBpwbbR">
D3 Force (w/ Canvas)&lt;/a> by Park, Jinyong (&lt;a href="https://codepen.io/jinyongp">@jinyongp&lt;/a>)
on &lt;a href="https://codepen.io">CodePen&lt;/a>.&lt;/span>
&lt;/p>
&lt;script async src="https://cpwebassets.codepen.io/assets/embed/ei.js">&lt;/script>
&lt;hr>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ ì—¬íƒœê¹Œì§€ ì‘ì—…í–ˆë˜ ë‚´ìš©ì„ Canvas APIë¡œ ë‹¤ì‹œ ì‘ì„±í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ê·¸ë ¤ë³´ëŠ” ê±´ ì‰¬ì› ì§€ë§Œ zoomê³¼ drag ê¸°ëŠ¥ì„ ì ìš©í•˜ëŠ” ê±´ ì—¬ëŸ¬ ì‹œí–‰ì°©ì˜¤ë¥¼ ê±°ì³ì•¼í–ˆê³  ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ ì ìš©í•  í•„ìš”ê°€ ìˆì–´ svg êµ¬í˜„ ë°©ì‹ë³´ë‹¤ ì–´ë ¤ì›€ì„ ê²ªì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì„±ëŠ¥ì„ ì¸¡ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. 50ê°œì˜ &lt;code>node&lt;/code>ë¥¼ í…ŒìŠ¤íŠ¸í–ˆë˜ svg ë°©ì‹ê³¼ ë‹¬ë¦¬ 200ê°œì˜ &lt;code>node&lt;/code>ë¥¼ ìƒì„±í•˜ê³  ì¸¡ì •í•´ë´¤ìŒì—ë„ êµ‰ì¥í•œ ì„±ëŠ¥ í–¥ìƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì€ í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„ì´ê³  ëœë”ë§ ì—°ì‚°ì€ ê±°ì˜ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;img src="https://jinyongp.dev/image/d3-force-canvas-200-performance.png" alt="Canvas 200 Performance">&lt;/p>
&lt;p>ì§€ê¸ˆê¹Œì§€ d3-force, selection, zoom, drag ë“± ë‹¤ì–‘í•œ d3.js ëª¨ë“ˆì„ ì‚¬ìš©í•´ë³´ì•˜ê³  Canvas APIë¡œ ì‘ì„±í•´ë³´ë©° ì„±ëŠ¥ í–¥ìƒ ë˜í•œ ì§„í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤. d3.jsì—ëŠ” ì´ ì™¸ì—ë„ ë¬´ìˆ˜íˆ ë§ì€ ëª¨ë“ˆì´ ìˆìŠµë‹ˆë‹¤. ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ëŠ”ë° ë¬´ê¶ë¬´ê¶ì§„ ì ì¬ë ¥ì„ ì§€ë‹Œë§Œí¼ ë” ë‹¤ì–‘í•˜ê²Œ í™œìš©í•´ë³´ë©° ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ í™œìš©í•´ë³´ì‹œë©´ ì¢‹ì„ ë“¯ ì‹¶ìŠµë‹ˆë‹¤. ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>&lt;a
class="underline-lsre"
href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D"
target="_blank" rel="noopener noreferrer nofollow"
>MDN - CanvasRenderingContext2D&lt;/a
>
&lt;/li>
&lt;/ul></description></item><item><title>Panning, Zooming and Dragging</title><link>https://jinyongp.dev/posts/d3js/3/</link><pubDate>Thu, Apr 21 11:16:27 2022 +0000</pubDate><author>dev.jinyongp@gmail.com (Jinyong Park)</author><guid>https://jinyongp.dev/posts/d3js/3/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom"
target="_blank" rel="noopener noreferrer nofollow"
>d3-zoom&lt;/a
>
ê³¼ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-drag"
target="_blank" rel="noopener noreferrer nofollow"
>d3-drag&lt;/a
>
ëŠ” ì‚¬ìš©ìê°€ ë§ˆìš°ìŠ¤ í´ë¦­ í˜¹ì€ í„°ì¹˜ë¡œ í™”ë©´ì„ ì œì–´í•˜ê±°ë‚˜ ìš”ì†Œë¥¼ ì´ë™í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ ì‹œë¦¬ì¦ˆ ë˜í•œ ë§ˆì°¬ê°€ì§€ë¡œ ì €ë²ˆ ì‹œë¦¬ì¦ˆì— êµ¬í˜„í–ˆë˜ ì½”ë“œì— d3-zoomê³¼ d3-dragë¥¼ ê²°í•©í•˜ëŠ” ê±¸ ëª©í‘œë¡œ í•˜ì—¬ ê·¸ì— í•„ìš”í•œ ë¶€ë¶„ë§Œ ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="d3-zoom">d3-zoom&lt;/h2>
&lt;p>d3-zoomì€ ì‚¬ìš©ìê°€ í™”ë©´ì„ ë“œë˜ê·¸ í˜¹ì€ ìŠ¤í¬ë¡¤í•˜ì—¬ í˜„ì¬ ë³´ëŠ” ë²”ìœ„ë¥¼ ì´ë™, í™•ëŒ€, ì¶•ì†Œí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. í˜¹ì€, íŠ¹ì • ìš”ì†Œë¥¼ ì„ íƒí–ˆì„ ë•Œ ê·¸ ìœ„ì¹˜ë¡œ ì´ë™í•˜ë©´ì„œ í¬ì»¤ìŠ¤í•˜ëŠ” íš¨ê³¼ë¥¼ ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="panning-and-zooming">Panning and Zooming&lt;/h3>
&lt;p>d3-zoomì€ d3-selectionê³¼ ì—°ê³„í•˜ì—¬ êµ¬í˜„í•©ë‹ˆë‹¤. &lt;code>Selection&lt;/code> ê°ì²´ì— zoom ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ &lt;code>d3.zoom()&lt;/code> í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì „ë‹¬í•©ë‹ˆë‹¤. ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ìƒì„±í•œ &lt;code>root&lt;/code> ìš”ì†Œë¥¼ ê°€ì ¸ì™€ zoom ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const zoom = d3
.zoom()
.on('zoom', (event) =&amp;gt; {
console.log('Zoom and Drag!');
});
root.call(zoom);
&lt;/code>&lt;/pre>
&lt;p>&lt;code>d3.zoom()&lt;/code> í•¨ìˆ˜ëŠ” &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. &lt;code>root.call(zoom)&lt;/code>ì„ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ ì¸ìë¡œ ë°›ì€ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom/blob/1bccd3fd56ea24e9658bd7e7c24e9b89410c8967/src/zoom.js#L72-L83"
target="_blank" rel="noopener noreferrer nofollow"
>ê°ì²´ì— ì—¬ëŸ¬ propertyì™€ eventë¥¼ ë“±ë¡&lt;/a
>
í•˜ê²Œ ë©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-selection#selection_call"
target="_blank" rel="noopener noreferrer nofollow"
>selection.call()&lt;/a
>
ì€ &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ìŠµë‹ˆë‹¤. &lt;code>root.call(zoom)&lt;/code>ì€ ë‹¤ìŒ ì½”ë“œì™€ ë™ì¼í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">zoom(root);
&lt;/code>&lt;/pre>
&lt;/blockquote>
&lt;p>&lt;code>root&lt;/code> ìš”ì†Œë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ ìŠ¤í¬ë¡¤ì„ í•´ë³´ë©´ ì´ë²¤íŠ¸ì— ë“±ë¡í•œ í•¨ìˆ˜ê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. &lt;code>zoom&lt;/code> ì´ë²¤íŠ¸ì— ë“±ë¡í•  í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì—¬ ìš”ì†Œë¥¼ ì´ë™ì‹œì¼œë´…ì‹œë‹¤.&lt;/p>
&lt;p>ì „ë‹¬í•œ í•¨ìˆ˜ëŠ” &lt;code>event&lt;/code> ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°€ì§‘ë‹ˆë‹¤. í´ë¦­ ì´ë™ì¸ì§€ ìŠ¤í¬ë¡¤ì¸ì§€ì— ë”°ë¼ ì¢…ë¥˜ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">// MouseEvent
sourceEvent: MouseEvent {...}
target: Æ’ y(t)
transform: Jx {k: x.xx, x: x.xx, y: x.xx}
type: &amp;quot;zoom&amp;quot;
// WheelEvent
sourceEvent: WheelEvent {...}
target: Æ’ y(t)
transform: Jx {k: x.xx, x: x.xx, y: x.xx}
type: &amp;quot;zoom&amp;quot;
&lt;/code>&lt;/pre>
&lt;p>ì´ ì¤‘ì—ì„œ scale factorì¸ &lt;code>k&lt;/code> ì™€ translation ê°’ì¸ &lt;code>x&lt;/code>, &lt;code>y&lt;/code>ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” &lt;code>transform&lt;/code> ê°ì²´ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">.on('zoom', ({ transform }) =&amp;gt; {
nodeGroup.attr('transform', transform);
linkGroup.attr('transform', transform);
});
&lt;/code>&lt;/pre>
&lt;p>ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ìƒì„±í•œ &lt;code>nodeGroup&lt;/code>ê³¼ &lt;code>linkGroup&lt;/code>ì€ &lt;code>svg&lt;/code> ìš”ì†Œë¥¼ ê°€ì§€ëŠ” &lt;code>Selection&lt;/code> ê°ì²´ë¡œ &lt;code>transform&lt;/code> ì†ì„±ì„ ë³€ê²½í•˜ì—¬ ìœ„ì¹˜ì™€ í¬ê¸°ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>transform&lt;/code>ì€ ê°ì²´ì¸ë° ê·¸ëŒ€ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ” ì ìš©ë  ë•Œ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom#transform_toString"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>transform.toString()&lt;/code>í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ &lt;code>&amp;quot;translate(x,y) scale(k)&amp;quot;&lt;/code> í˜•íƒœì˜ ë¬¸ìì—´ë¡œ ë³€í™˜&lt;/a
>
ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;p>í™”ë©´ì„ ë“œë˜ê·¸í•˜ì—¬ ì´ë™í•˜ê³  ìŠ¤í¬ë¡¤í•˜ì—¬ í™•ëŒ€, ì¶•ì†Œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="focusing">Focusing&lt;/h3>
&lt;p>ê·¸ëŸ¼ íŠ¹ì • ìš”ì†Œë¥¼ í´ë¦­í–ˆì„ ë•Œ í•´ë‹¹ ìš”ì†Œë¥¼ í¬ì»¤ìŠ¤í•˜ëŠ” ë™ì‘ì— ëŒ€í•´ êµ¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤. ì¼ë‹¨ &lt;code>Selection&lt;/code> ê°ì²´ì— ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„  &lt;code>selection.on()&lt;/code> ë©”ì„œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì €ë²ˆ ì‹œë¦¬ì¦ˆì—ì„œ ìƒì„±í•œ &lt;code>circles&lt;/code>ë¥¼ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">circles.on('click', (event, node) =&amp;gt; {
console.log('Click!');
});
&lt;/code>&lt;/pre>
&lt;p>&lt;code>click&lt;/code> ì´ë²¤íŠ¸ì— ë“±ë¡í•œ í•¨ìˆ˜ëŠ” &lt;code>event&lt;/code>ì™€ &lt;code>node&lt;/code> ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°€ì§‘ë‹ˆë‹¤. &lt;code>node&lt;/code>ì˜ í˜„ì¬ ìœ„ì¹˜ &lt;code>x&lt;/code>, &lt;code>y&lt;/code> ì¢Œí‘œë¡œ ì´ë™ ë° í™•ëŒ€í•´ì•¼ í•˜ë¯€ë¡œ ì´ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì‚¬ìš©ìì˜ ì¡°ì‘ì´ ì•„ë‹Œ ì½”ë“œë¥¼ í†µí•´ íŠ¹ì • ì¢Œí‘œë¡œ ì´ë™í•˜ê³  í™•ëŒ€í•˜ê¸° ìœ„í•´ì„  &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom#zoom_translateTo"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>zoom.translateTo&lt;/code>&lt;/a
>
ì™€ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom#zoom_scaleTo"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>zoom.scaleTo&lt;/code>&lt;/a
>
í•¨ìˆ˜ë¥¼ ì´ìš©í•©ë‹ˆë‹¤. í•´ë‹¹ í•¨ìˆ˜ëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ì „ë‹¬ë°›ìœ¼ë¯€ë¡œ &lt;code>selection.call()&lt;/code> í•¨ìˆ˜ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">circles.on('click', (_, { x, y }) =&amp;gt; {
root
.transition()
.duration(500)
.call(zoom.translateTo, x, y)
.transition()
.call(zoom.scaleTo, 3);
});
&lt;/code>&lt;/pre>
&lt;p>&lt;code>circles&lt;/code> ìš”ì†Œë¥¼ í´ë¦­í•˜ë©´ í´ë¦­í•œ &lt;code>circle&lt;/code>ì˜ &lt;code>x&lt;/code>, &lt;code>y&lt;/code> ì¢Œí‘œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>zoom.translateTo&lt;/code>ì™€ &lt;code>zoom.scaleTo&lt;/code>ê°€ &lt;code>root&lt;/code> ìš”ì†Œì˜ zoom ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. &lt;code>transition&lt;/code>ê³¼ &lt;code>duration&lt;/code>ì€ zoomì´ ì´ë™í•  ë•Œ transition íš¨ê³¼ë¥¼ ì£¼ì–´ ë³´ë‹¤ ìì—°ìŠ¤ëŸ¬ìš´ ì›€ì§ì„ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="d3-drag">d3-drag&lt;/h2>
&lt;p>d3-dragëŠ” ìš”ì†Œë¥¼ í´ë¦­í•˜ì—¬ ë“œë˜ê·¸í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="dragging">Dragging&lt;/h3>
&lt;p>d3-drag ë˜í•œ d3-selectionì— ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. &lt;code>d3.drag()&lt;/code> í•¨ìˆ˜ëŠ” &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ìƒì„±í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤. ì¶”ê°€ë¡œ, ë“œë˜ê·¸í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ì„¸ ê°€ì§€ ì´ë²¤íŠ¸ë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const drag = d3
.drag()
.on(&amp;quot;start&amp;quot;, (event, node) =&amp;gt; {
console.log('Drag Start!');
})
.on(&amp;quot;drag&amp;quot;, (event, node) =&amp;gt; {
console.log('Dragging!');
})
.on(&amp;quot;end&amp;quot;, (event, node) =&amp;gt; {
console.log('Drag End!');
});
circles.call(drag);
&lt;/code>&lt;/pre>
&lt;p>ìš”ì†Œë¥¼ í´ë¦­í•˜ë©´ &lt;code>start&lt;/code> ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ê³ , í´ë¦­ í›„ ë“œë˜ê·¸í•˜ë©´ &lt;code>drag&lt;/code> ì´ë²¤íŠ¸ ê·¸ë¦¬ê³  í´ë¦­ì„ ë–¼ë©´ &lt;code>end&lt;/code> ì´ë²¤íŠ¸ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ì— ë“±ë¡í•œ ëª¨ë“  í•¨ìˆ˜ëŠ” í´ë¦­ ì´ë²¤íŠ¸ ê°ì²´ì™€ í´ë¦­í•œ ìš”ì†Œì˜ ì •ë³´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°€ì§‘ë‹ˆë‹¤.&lt;/p>
&lt;p>ìš”ì†Œë¥¼ í´ë¦­í•˜ì—¬ ë“œë˜ê·¸í•  ë•Œ simulationì€ ê³„ì† ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì—¬ì•¼ í•©ë‹ˆë‹¤. d3-force ì‹œë¦¬ì¦ˆì—ì„œ ì–¸ê¸‰í•œ ë‚´ìš©ìœ¼ë¡œ simulationì„ ì¢…ë£Œí•˜ì§€ ì•Šê³  ê³„ì† ì‹¤í–‰í•˜ë ¤ë©´ &lt;code>alphaTarget&lt;/code>ì„ ì´ìš©í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ë˜í•œ, ìš”ì†Œê°€ ë‹¤ë¥¸ ìš”ì†Œì™€ ìƒê´€ì—†ì´ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#simulation_nodes"
target="_blank" rel="noopener noreferrer nofollow"
>íŠ¹ì • ê³ ì • ì¢Œí‘œì— ìœ„ì¹˜í•˜ë„ë¡ í•˜ë ¤ë©´ &lt;code>fx&lt;/code>ì™€ &lt;code>fy&lt;/code> ê°’ì„ ì„¤ì •&lt;/a
>
í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const drag = d3
.drag()
.on('start', (event, node) =&amp;gt; {
nodeGroup.style('cursor', 'grabbing');
simulation.alphaTarget(0.1).restart();
})
.on('drag', (event, node) =&amp;gt; {
node.fx = event.x;
node.fy = event.y;
})
.on('end', (event, node) =&amp;gt; {
nodeGroup.style('cursor', 'grab');
simulation.alphaTarget(0);
node.fx = null;
node.fy = null;
});
circles.call(drag);
&lt;/code>&lt;/pre>
&lt;p>í´ë¦­í•  ë•Œ &lt;code>alphaTarget&lt;/code>ì„ &lt;code>alphaMin&lt;/code>ë³´ë‹¤ í¬ê²Œ ì„¤ì •í•˜ì—¬ simulationì´ ì ˆëŒ€ ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. &lt;code>alphaTarget&lt;/code> ê°’ì´ í´ìˆ˜ë¡ ë‹¤ë¥¸ ìš”ì†Œì˜ ì›€ì§ì„ì´ ì»¤ì§‘ë‹ˆë‹¤. í´ë¦­ì„ ì¢…ë£Œí•˜ë©´ ë‹¤ì‹œ ë˜ëŒë ¤ë†“ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>í´ë¦­í•˜ì—¬ ë“œë˜ê·¸ë¥¼ ì‹œì‘í•˜ë©´ &lt;code>fx&lt;/code>ì™€ &lt;code>fy&lt;/code> ê°’ì„ í˜„ì¬ ë§ˆìš°ìŠ¤ì˜ ìœ„ì¹˜ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. í´ë¦­ì„ ì¢…ë£Œí•˜ë©´ &lt;code>null&lt;/code>ë¡œ ì„¤ì •í•˜ì—¬ ê³ ì • ìœ„ì¹˜ë¥¼ ì œê±°í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="impl">Impl.&lt;/h2>
&lt;p>d3-zoomê³¼ d3-dragë¥¼ ì¶”ê°€í•´ë³´ì•˜ìŠµë‹ˆë‹¤. &lt;code>Network&lt;/code> classë¥¼ ì‘ì„±í•˜ì—¬ ì½”ë“œë¥¼ ì •ë¦¬í–ˆê³  ì‹¤ì‹œê°„ìœ¼ë¡œ &lt;code>alpha&lt;/code>ì™€ &lt;code>zoom&lt;/code> ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ì œì–´í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. &lt;code>nodes&lt;/code>ì™€ &lt;code>links&lt;/code>ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. ë¹„ì–´ìˆëŠ” ì±„ë¡œ &lt;code>ADD&lt;/code>ë¥¼ í´ë¦­í•˜ë©´ ìƒˆë¡œìš´ ìš”ì†Œê°€ ì„ì˜ì˜ ìš”ì†Œì— ì—°ê²°ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>node&lt;/code>ì˜ ì•„ì´ë””ë¥¼ DOMì— ê·¸ë ¤ &lt;code>node&lt;/code>ì˜ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ DOMì— ì ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ë³´ì—¬ì¤¬ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p class="codepen" data-height="600" data-default-tab="result" data-slug-hash="mdpoWxa" data-user="jinyongp" style="height: 300px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
&lt;span>See the Pen &lt;a href="https://codepen.io/jinyongp/pen/mdpoWxa">
D3 Force, Zoom, Drag (w/ SVG)&lt;/a> by Park, Jinyong (&lt;a href="https://codepen.io/jinyongp">@jinyongp&lt;/a>)
on &lt;a href="https://codepen.io">CodePen&lt;/a>.&lt;/span>
&lt;/p>
&lt;script async src="https://cpwebassets.codepen.io/assets/embed/ei.js">&lt;/script>
&lt;hr>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>d3-zoomê³¼ d3-dragë¥¼ ê¸°ì¡´ í”„ë¡œì íŠ¸ì— ì—°ê²°í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ë©´ì„œ ê°œë…ê³¼ êµ¬í˜„ ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì‚¬ìš©í•´ë³¸ ê¸°ëŠ¥ ë§ê³ ë„ d3ëŠ” ì •ë§ ë§ì€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì— ì˜ˆì‹œê°€ ì‚´ì§ ì•„ì‰½ê¸´ í•˜ì§€ë§Œ, ì§ì ‘ ì‚¬ìš©í•´ë³´ë©´ì„œ ê·¸ ìœ í‹¸ì„±ì„ í™•ì¸í•´ë³´ì•˜ìœ¼ë©´ í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>ADD&lt;/code> ë²„íŠ¼ì„ ëˆŒëŸ¬ ê³„ì† ìš”ì†Œë¥¼ ì¶”ê°€í•˜ë‹¤ë³´ë©´ ì ì  í”„ë ˆì„ì´ ë–¨ì–´ì§€ë©´ì„œ ì„±ëŠ¥ì´ í•˜ë½í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë¬¸ì œëŠ” HTML5 Canvas APIê°€ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í—ˆë‚˜, ì´ ë°©ë²•ë„ ê·¸ë¦¬ê¸°ì—” ì‰¬ìš¸ì§€ ëª°ë¼ë„ ì˜¤ëŠ˜ ì ìš©í•œ zoomê³¼ drag ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ”ë°ì—” ì–´ë ¤ì›€ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì‹œë¦¬ì¦ˆëŠ” ì§€ê¸ˆê¹Œì§€ êµ¬í˜„í•œ ë‚´ìš©ì„ Canvas APIë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ì „ë¶€ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-zoom"
target="_blank" rel="noopener noreferrer nofollow"
>d3-zoom&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-drag"
target="_blank" rel="noopener noreferrer nofollow"
>d3-drag&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-transition"
target="_blank" rel="noopener noreferrer nofollow"
>d3-transition&lt;/a
>
&lt;/li>
&lt;/ul></description></item><item><title>Data Driven Transformation of DOM</title><link>https://jinyongp.dev/posts/d3js/2/</link><pubDate>Sat, Apr 16 02:47:11 2022 +0000</pubDate><author>dev.jinyongp@gmail.com (Jinyong Park)</author><guid>https://jinyongp.dev/posts/d3js/2/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-selection"
target="_blank" rel="noopener noreferrer nofollow"
>d3-selection&lt;/a
>
ì€ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOMì„ ì¡°ì‘í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ë²ˆ ì‹œë¦¬ì¦ˆëŠ” d3-forceì™€ ì—°ê³„í•˜ì—¬ Github Follower, Following ê´€ê³„ë§ ê·¸ë¦¬ê¸°ë¥¼ ëª©í‘œë¡œ í•˜ê³  ìˆìœ¼ë¯€ë¡œ êµ¬í˜„ ê³¼ì •ì—ì„œ í•„ìš”í•œ ë¶€ë¶„ì— ëŒ€í•´ì„œë§Œ ë‹¤ë£¨ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ë“¤ì–´ê°€ê¸° ì „ì— &lt;code>Selection&lt;/code> ê°ì²´ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤. d3-selectionìœ¼ë¡œ ì„ íƒí•œ ìš”ì†ŒëŠ” &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-selection/blob/main/src/selection/index.js"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>groups&lt;/code>ì™€ &lt;code>parents&lt;/code> propertyë¥¼ ê°–ëŠ” &lt;code>Selection&lt;/code> ê°ì²´&lt;/a
>
ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. &lt;code>Selection&lt;/code> ê°ì²´ëŠ” ì„ íƒí•œ ìš”ì†Œë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;ul>
&lt;li>ìš”ì†Œ ì„ íƒ: selection, select, selectAll, selectChild, selectChildren, filter, merge&lt;/li>
&lt;li>ìš”ì†Œ ë³€ê²½: attr, classed, style, property, text, html, append, insert, remove, clone, sort, order, raise, lower&lt;/li>
&lt;li>ë°ì´í„° ì—°ê²°: data, join, enter, exit, datum&lt;/li>
&lt;li>ì´ë²¤íŠ¸ í•¸ë“¤ë§: on, dispatch&lt;/li>
&lt;li>ì œì–´ íë¦„: each, call, empty, nodes, size, [Symbol.iterator]()&lt;/li>
&lt;/ul>
&lt;p>d3-selectionì„ ì´ìš©í•˜ì—¬ ì„ íƒí•œ ìš”ì†Œì— ë°ì´í„°ë¥¼ ì—°ê²°í•˜ê³  ê·¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì´ì œ ì½”ë“œì™€ í•¨ê»˜ d3-selectionì„ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="creating-and-editing">Creating and Editing&lt;/h2>
&lt;p>ê´€ê³„ë§ì— ì‚¬ìš©í•  &lt;code>nodes&lt;/code>ì™€ &lt;code>links&lt;/code>ë¥¼ ë¸Œë¼ìš°ì €ì— ê·¸ë ¤ì£¼ê¸° ìœ„í•´ d3-selectionìœ¼ë¡œ &lt;code>svg&lt;/code>ë¥¼ ìƒì„±í•˜ê³  í¬ê¸°ë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const root = d3
.select('body') // === d3.select(document.body)
.append('svg')
.attr('width', '100%')
.attr('height', '100%')
.style('display', 'block');
&lt;/code>&lt;/pre>
&lt;p>&lt;code>body&lt;/code> ìš”ì†Œë¥¼ ì„ íƒí•˜ê³  í•˜ìœ„ì— &lt;code>svg&lt;/code> ìš”ì†Œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  &lt;code>attr&lt;/code> ë©”ì„œë“œì™€ &lt;code>style&lt;/code> ë©”ì„œë“œë¡œ &lt;code>svg&lt;/code>ì˜ ì†ì„±ê³¼ ìŠ¤íƒ€ì¼ì„ ì§€ì •í–ˆìŠµë‹ˆë‹¤. &lt;code>root&lt;/code>ì—” &lt;code>svg&lt;/code> ìš”ì†Œë¥¼ ë‹´ê³  ìˆëŠ” &lt;code>Selection&lt;/code> ê°ì²´ê°€ í• ë‹¹ë©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>root&lt;/code> ì•„ë˜ &lt;code>links&lt;/code>ì™€ &lt;code>nodes&lt;/code>ë¥¼ ê°ê° ë¬¶ì„ &lt;code>g&lt;/code> ìš”ì†Œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. (&lt;code>linkGroup&lt;/code>ì„ ë¨¼ì € ìƒì„±í•´ì•¼ ë’¤ì— ë°°ì¹˜ë©ë‹ˆë‹¤.)&lt;/p>
&lt;pre>&lt;code class="language-js">const linkGroup = root.append('g').attr('id', 'links');
const nodeGroup = root.append('g').attr('id', 'nodes');
&lt;/code>&lt;/pre>
&lt;p>&lt;code>id&lt;/code>ëŠ” ë³„ ë‹¤ë¥¸ ì—­í•  ì—†ì´ ì‹ë³„ì„ ìœ„í•´ ì¶”ê°€í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="joining-data">Joining Data&lt;/h2>
&lt;p>ì´ì œ DOM ìš”ì†Œì— ë°ì´í„°ë¥¼ ì—°ê²°í•´ë´…ì‹œë‹¤. &lt;code>nodeGroup&lt;/code> ì•„ë˜ &lt;code>circle&lt;/code>ì„ ë°°ì¹˜í•˜ê³  &lt;code>nodes&lt;/code> ë°ì´í„°ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const circles = nodeGroup
.selectAll('circle')
.data(nodes)
.join('circle')
.attr('r', 5)
.attr('fill', 'blue');
&lt;/code>&lt;/pre>
&lt;p>ì–¼í• ë³´ë©´ ë§ì´ ë˜ëŠ” ë“¯í•˜ì§€ë§Œ ì•„ì§ ìƒì„±ë„ í•˜ì§€ ì•Šì€ &lt;code>circle&lt;/code>ì„ ì™œ ì„ íƒí•˜ê³  ìˆëŠ”ì§€ ì˜ë¬¸ì´ ìƒê¹ë‹ˆë‹¤. ê° ë‹¨ê³„ê°€ ìƒì„±í•˜ëŠ” &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ë³´ê³  íë¦„ì„ ì´í•´í•´ë´…ì‹œë‹¤.&lt;/p>
&lt;p>&lt;code>nodeGroup.selectAll('circle')&lt;/code>ì€ ë‹¹ì—°íˆ ë¹ˆ &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.&lt;/p>
&lt;blockquote>
&lt;p>ğŸ’¡ ë‹¹ì—°íˆ ë¹„ì–´ìˆëŠ” &lt;code>Selection&lt;/code> ê°ì²´ë¥¼ ë°›ì„ê±´ë° ì™œ &lt;code>selectAll&lt;/code>ì„ ì“¸ê¹Œìš”?&lt;/p>
&lt;p>ì´í›„ì— &lt;code>nodes&lt;/code>ë¥¼ ì¶”ê°€í•´ì•¼ í•  ìƒí™©ì´ ìƒê¸´ë‹¤ë©´, ê¸°ì¡´ì— ìƒì„±ë˜ì—ˆë˜ &lt;code>circle&lt;/code> ìš”ì†Œì™€ &lt;code>nodes&lt;/code>ë¥¼ ë¹„êµí•˜ì—¬ ì¶”ê°€ëœ &lt;code>node&lt;/code>ì˜ ê°œìˆ˜ë§Œí¼ &lt;code>circle&lt;/code> ìš”ì†Œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì¦‰, ë¹„êµë¥¼ ìœ„í•´ ì„ íƒí•˜ëŠ” ìš”ì†Œì™€ ìƒì„±í•˜ëŠ” ìš”ì†ŒëŠ” ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;/blockquote>
&lt;pre>&lt;code class="language-js">_groups: [NodeList(0)]
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;p>&lt;code>.data(nodes)&lt;/code>ëŠ” ë¹ˆ &lt;code>Selection&lt;/code> ê°ì²´ì— &lt;code>nodes&lt;/code> ë°°ì—´ì˜ ê¸¸ì´ë§Œí¼ ì—°ê²°í•©ë‹ˆë‹¤. &lt;code>jt&lt;/code> ê°ì²´ëŠ” &lt;code>__data__&lt;/code> propertyì— &lt;code>node&lt;/code> ì •ë³´ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">_enter: [Array(5)]
0: (5) [jt, jt, jt, jt, jt]
_exit: [Array(0)]
0: []
_groups: [Array(5)]
0: (5) [empty Ã— 5]
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-js">_enter: Array(1)
0: Array(5)
0: jt {...}
1: jt {...}
2: jt {...}
3: jt {...}
4: jt
namespaceURI: &amp;quot;http://www.w3.org/2000/svg&amp;quot;
ownerDocument: document
__data__: {id: 5, index: 4, x:...}
_exit: [Array(0)]
_groups: [Array(5)]
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;p>&lt;code>.join('circle')&lt;/code>ì€ &lt;code>.enter().append('circle')&lt;/code>ê³¼ ë™ì¼í•œ ë‹¨ì¶• í‘œí˜„ì…ë‹ˆë‹¤. &lt;code>.enter()&lt;/code>ê¹Œì§€ ì‹¤í–‰í•œ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">_groups: Array(1)
0: (5) [jt, jt, jt, jt, jt]
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;pre>&lt;code class="language-js">_groups: Array(1)
0: Array(5)
0: jt {ownerDocument: document, namespaceURI: 'http://www.w3.org/2000/svg', ...}
1: jt {ownerDocument: document, namespaceURI: 'http://www.w3.org/2000/svg', ...}
2: jt {ownerDocument: document, namespaceURI: 'http://www.w3.org/2000/svg', ...}
3: jt {ownerDocument: document, namespaceURI: 'http://www.w3.org/2000/svg', ...}
4: jt
namespaceURI: &amp;quot;http://www.w3.org/2000/svg&amp;quot;
ownerDocument: document
__data__: {id: 5, index: 4, x: ...}
...
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;p>&lt;code>enter().append('circle')&lt;/code>ê¹Œì§€ ì‹¤í–‰í•œ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">_groups: Array(1)
0: Array(5)
0: circle
1: circle
2: circle
3: circle
4: circle
__data__: {id: 5, index: 4, x:...}
...
_parents: [g#nodes]
&lt;/code>&lt;/pre>
&lt;p>&lt;code>circle&lt;/code> ìš”ì†Œê°€ ì—°ê²°ë˜ì—ˆê³  &lt;code>circle&lt;/code> ë‚´ë¶€ì— &lt;code>__data__&lt;/code>ê°€ ê²°í•©ë˜ì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="impl">Impl.&lt;/h2>
&lt;p>&lt;code>ticked&lt;/code> í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ DOM ìš”ì†Œì™€ ê²°í•©í•œ &lt;code>node&lt;/code> ê°ì²´ì˜ &lt;code>x&lt;/code>, &lt;code>y&lt;/code> ì¢Œí‘œ ë°ì´í„°ë¥¼ ì´ìš©í•´ ìš”ì†Œë¥¼ í™”ë©´ ìƒì— ê·¸ë ¤ë³´ì•˜ìŠµë‹ˆë‹¤.&lt;/p>
&lt;p class="codepen" data-height="600" data-default-tab="result" data-slug-hash="MWrxgPB" data-user="jinyongp" style="height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
&lt;span>See the Pen &lt;a href="https://codepen.io/jinyongp/pen/MWrxgPB">
D3 Force (w/ SVG)&lt;/a> by Park, Jinyong (&lt;a href="https://codepen.io/jinyongp">@jinyongp&lt;/a>)
on &lt;a href="https://codepen.io">CodePen&lt;/a>.&lt;/span>
&lt;/p>
&lt;script async src="https://cpwebassets.codepen.io/assets/embed/ei.js">&lt;/script>
&lt;hr>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>d3-selectionì˜ ê°œë…ê³¼ ë°ì´í„° ê²°í•© ë°©ë²•ê³¼ íë¦„ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì €ë²ˆê³¼ ë‹¬ë¦¬ ë§ì€ ê°œë…ì— ëŒ€í•´ ì•Œì•„ë³´ì§„ ì•Šì•˜ì§€ë§Œ, ìš”ì†Œë¥¼ ì„ íƒí•˜ê³  ì†ì„±ì„ ë³€ê²½í•˜ê³  ë°ì´í„°ë¥¼ ê²°í•©í•˜ëŠ” ì •ë§ í•„ìš”í•œ ë‚´ìš©ë§Œ ë‹¤ë£¨ë©´ì„œ d3-forceì™€ ì—°ë™í•˜ì—¬ ê°„ë‹¨í•œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>node&lt;/code>ì˜ ë°ì´í„°ê°€ ë§ì•„ì§ˆìˆ˜ë¡ d3-selectionì„ ë”ìš± ì ê·¹ì ìœ¼ë¡œ ì´ìš©í•  ì˜ˆì •ì´ë¯€ë¡œ, ê·¸ ë•Œë¥¼ ìœ„í•´ ì´ë²ˆì—” ì´ ì •ë„ë¡œ í•˜ê³  ë‹¤ìŒ ì‹œë¦¬ì¦ˆì—ì„  d3-zoomê³¼ d3-dragë¥¼ ì´ìš©í•˜ì—¬ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-selection"
target="_blank" rel="noopener noreferrer nofollow"
>d3-selection&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="underline-lsre"
href="https://bost.ocks.org/mike/join/"
target="_blank" rel="noopener noreferrer nofollow"
>Thinking with Joins&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="underline-lsre"
href="https://lucidar.me/en/d3.js/part-07-data-binding"
target="_blank" rel="noopener noreferrer nofollow"
>D3.js Tutorial - Data Binding&lt;/a
>
&lt;/li>
&lt;/ul></description></item><item><title>Simulating Physical Forces</title><link>https://jinyongp.dev/posts/d3js/1/</link><pubDate>Thu, Apr 14 14:20:46 2022 +0000</pubDate><author>dev.jinyongp@gmail.com (Jinyong Park)</author><guid>https://jinyongp.dev/posts/d3js/1/</guid><description>&lt;h1 id="introduction">Introduction&lt;/h1>
&lt;p>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force"
target="_blank" rel="noopener noreferrer nofollow"
>d3-force&lt;/a
>
ëŠ” ì…ì(&lt;code>nodes&lt;/code>) ê°„ì— ê°€í•´ì§€ëŠ” ë¬¼ë¦¬ì  í˜(forces)ì„ simulationí•˜ì—¬ ì…ìì˜ ì¢Œí‘œê°’ì„ ê³„ì‚°í•˜ê³  ì œê³µí•©ë‹ˆë‹¤.&lt;/p>
&lt;p>ì½”ë“œì™€ í•¨ê»˜ &lt;a
class="underline-lsre"
href="#simulation"
>Simulation&lt;/a
>
ê³¼ &lt;a
class="underline-lsre"
href="#forces"
>Forces&lt;/a
>
ì— ëŒ€í•´ ì´í•´í•´ë´…ì‹œë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="simulationhttpsgithubcomd3d3-forcesimulation">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#simulation"
target="_blank" rel="noopener noreferrer nofollow"
>Simulation&lt;/a
>
&lt;/h2>
&lt;p>Simulationì€ &lt;code>nodes&lt;/code>ì— ê°€í•´ì§€ëŠ” ë¬¼ë¦¬ì  í˜ì„ ê³„ì‚°í•©ë‹ˆë‹¤. &lt;code>d3.forceSimulation()&lt;/code> í•¨ìˆ˜ë¡œ simulationì„ ìƒì„±í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const simulation = d3.forceSimulation();
&lt;/code>&lt;/pre>
&lt;p>Simulationì— ê·¸ë˜í”„ì˜ ì •ì  ëª©ë¡ì¸ &lt;code>nodes&lt;/code>ì™€ ê°„ì„  ëª©ë¡ì¸ &lt;code>links&lt;/code>ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="nodes">Nodes&lt;/h3>
&lt;p>ë¨¼ì € &lt;code>nodes&lt;/code>ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤. Simulationì€ ì…ë ¥í•œ &lt;code>node&lt;/code> ê°ì²´ì— ê³„ì‚° ê²°ê³¼ê°’ì„ ì¶”ê°€í•©ë‹ˆë‹¤. &lt;code>nodes&lt;/code> ë°°ì—´ì—ì„œ ê° &lt;code>node&lt;/code>ë¥¼ ì¸ë±ìŠ¤ë¡œ ê´€ë¦¬í•´ë„ ë˜ì§€ë§Œ, ë³´ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ê³ ìœ  ì‹ë³„ì &lt;code>id&lt;/code>ë¥¼ ì¶”ê°€í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const nodes = [...Array(5)].map((_, i) =&amp;gt; ({ id: i + 1 }));
// [{ id: 1 }, { id: 2 }, { id: 3 }, { id: 4 }, { id: 5 }]
simulation.nodes(nodes);
// nodes [
// {
// id: 1,
// index: 0,
// vx: x.xx,
// vy: x.xx,
// x: x.xx,
// y: x.xx,
// }
// , ...
// ]
&lt;/code>&lt;/pre>
&lt;p>Simulationì€ &lt;code>node&lt;/code>ì— &lt;code>index&lt;/code>ì™€ í•¨ê»˜ ì¢Œí‘œê°’ì¸ &lt;code>x&lt;/code>, &lt;code>y&lt;/code> ê·¸ë¦¬ê³  ì†ë„ê°’ì¸ &lt;code>vx&lt;/code>, &lt;code>vy&lt;/code>ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì›ë³¸ &lt;code>node&lt;/code> ê°ì²´ ìì²´ë¥¼ ìˆ˜ì •í•´ì•¼í•˜ë¯€ë¡œ &lt;a
class="underline-lsre"
href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions"
target="_blank" rel="noopener noreferrer nofollow"
>non-extensibleí•œ ê°ì²´&lt;/a
>
ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë§Œì•½ ë¶ˆë³€ì„± ìœ ì§€ê°€ í•„ìš”í•˜ë‹¤ë©´ ê°ì²´ë¥¼ ë³µì‚¬í•˜ì—¬ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="links">Links&lt;/h3>
&lt;p>ê·¸ëŸ¼ ì´ì œ &lt;code>links&lt;/code>ë¥¼ ë“±ë¡í•´ë´…ì‹œë‹¤. d3-forceì—ì„œ &lt;code>link&lt;/code> ê°ì²´ëŠ” ë°©í–¥ì„±ì„ ì§€ë‹Œ ê°„ì„ ì´ë¯€ë¡œ &lt;code>source&lt;/code>ì™€ &lt;code>target&lt;/code>ì„ ê°€ì§„ ê°ì²´ë¡œ ì„ ì–¸í•©ë‹ˆë‹¤. &lt;code>nodes&lt;/code>ì™€ ë‹¬ë¦¬ ê° propertyëŠ” ê°ì²´ê°€ ì•„ë‹Œ &lt;code>node&lt;/code>ë¥¼ ì‹ë³„í•  &lt;code>id&lt;/code>ë¥¼ ê°–ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const links = [
{ source: 1, target: 4 },
{ source: 3, target: 4 },
{ source: 2, target: 5 },
{ source: 4, target: 1 },
{ source: 5, target: 4 },
];
simulation.force('link', d3.forceLink(links).id(({ id }) =&amp;gt; id));
// links [
// {
// index: 1,
// source: {
// id: 3
// index: 2
// vx: x.xx,
// vy: x.xx,
// x: x.xx,
// y: x.xx,
// },
// target: {
// ...
// },
// }, ...
// ]
&lt;/code>&lt;/pre>
&lt;p>ë‚˜ì¤‘ì— &lt;a
class="underline-lsre"
href="#forces"
>Forces&lt;/a
>
ì±•í„°ì—ì„œ ë‹¤ì‹œ ë§Œë‚˜ê² ì§€ë§Œ, &lt;code>links&lt;/code>ëŠ” &lt;code>nodes&lt;/code>ì— ì‘ìš©í•  í˜ì„ ì œê³µí•˜ë¯€ë¡œ &lt;code>force&lt;/code>ë¡œ ì¶”ê°€í•©ë‹ˆë‹¤. &lt;code>links&lt;/code>ë¥¼ simulationì— ì¶”ê°€í•˜ë©´ &lt;code>source&lt;/code>, &lt;code>target&lt;/code>ì— ì„¤ì •ëœ &lt;code>id&lt;/code>ë¥¼ ë™ì¼í•œ &lt;code>id&lt;/code>ë¥¼ ê°€ì§„ &lt;code>node&lt;/code> ê°ì²´ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤. (ì½”ë“œì— ë‚˜ì™€ ìˆë“¯ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#link_id"
target="_blank" rel="noopener noreferrer nofollow"
>link.id()&lt;/a
>
í•¨ìˆ˜ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.)&lt;/p>
&lt;h3 id="tick">Tick&lt;/h3>
&lt;p>Simulationì— &lt;code>nodes&lt;/code>ì™€ &lt;code>links&lt;/code>ë¥¼ ë“±ë¡í•´ë´¤ìŠµë‹ˆë‹¤. &lt;code>tick&lt;/code> ì´ë²¤íŠ¸ì— í•¸ë“¤ëŸ¬ í•¨ìˆ˜ë¥¼ ë“±ë¡í•˜ì—¬ ë§¤ &lt;code>tick&lt;/code>ë§ˆë‹¤ ì‹¤í–‰í•  ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Simulationì€ ìƒì„± ì§í›„ ê³§ë°”ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. í•„ìš”í•˜ë‹¤ë©´ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#simulation_stop"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>simulation.stop()&lt;/code>&lt;/a
>
í•¨ìˆ˜ë¡œ ì •ì§€í•˜ê±°ë‚˜ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#simulation_restart"
target="_blank" rel="noopener noreferrer nofollow"
>&lt;code>simulation.restart()&lt;/code>&lt;/a
>
ë¡œ ì¬ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>tick&lt;/code> ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•˜ì—¬ &lt;code>node&lt;/code>ì— ì €ì¥ëœ ê²°ê³¼ê°’ì„ í™•ì¸í•´ë´…ì‹œë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">simulation.on('tick', () =&amp;gt; {
console.log(nodes[0]);
});
// ì²« ë²ˆì§¸ tick: {id: 1, index: 0, x: 5.826695986913618, y: -4.292216192303559, vy: -4.292216192303559,Â â€¦}
// ë‘ ë²ˆì§¸ tick: {id: 1, index: 0, x: 4.820993020602418, y: -8.04960224695047, vy: -3.7573860546469113,Â â€¦}
// ì„¸ ë²ˆì§¸ tick: {id: 1, index: 0, x: 4.188865598751164, y: -10.465829270778734, vy: -2.4162270238282635,Â â€¦}
// ë„¤ ë²ˆì§¸ tick: {id: 1, index: 0, x: 3.823314491169919, y: -11.82585404923582, vy: -1.3600247784570867,Â â€¦}
// ...
&lt;/code>&lt;/pre>
&lt;p>Simulationì€ &lt;code>tick&lt;/code> ë‹¨ìœ„ë§ˆë‹¤ ì¢Œí‘œê°’ì„ ê³„ì‚°í•©ë‹ˆë‹¤. ìš°ë¦° simulationì— ì˜í•´ &lt;code>tick&lt;/code>ë§ˆë‹¤ ê³„ì‚°ëœ ì ˆëŒ€ ì¢Œí‘œê°’(x, y)ë¥¼ í™”ë©´ì— ê·¸ë ¤ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ëŠ” ê±´ ë‚˜ì¤‘ì— d3-selectionê³¼ í•¨ê»˜ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="alpha">Alpha&lt;/h3>
&lt;p>Simulationì„ ì–¼ë§ˆë‚˜ ì§„í–‰í•  ì§€ ê²°ì •í•˜ëŠ” &lt;code>alpha&lt;/code>, &lt;code>alphaMin&lt;/code>, &lt;code>alphaDecay&lt;/code>, &lt;code>alphaTarget&lt;/code>, &lt;code>velocityDecay&lt;/code> ì†ì„±ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤. ë¬¸ì„œì— ì£¼ì–´ì§„ &lt;code>alpha&lt;/code>ì˜ ì •ì˜ëŠ” ì„¤ëª…ë„ ë¶€ì‹¤í•˜ê³  ì´í•´í•˜ê¸° ê½¤ ì–´ë ¤ìš°ë‹ˆ &lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force/blob/main/src/simulation.js"
target="_blank" rel="noopener noreferrer nofollow"
>êµ¬í˜„ ì½”ë“œ&lt;/a
>
ë¥¼ ë³´ë©° ë™ì‘ ë°©ì‹ì„ ì•Œì•„ë´…ì‹œë‹¤. ì£¼ì–´ì§„ ì†ì„±ì˜ ì´ˆê¸°ê°’ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">var simulation,
alpha = 1,
alphaMin = 0.001,
alphaDecay = 1 - Math.pow(alphaMin, 1 / 300) // 0.02276277904418933
alphaTarget = 0,
velocityDecay = 0.6,
// ...
&lt;/code>&lt;/pre>
&lt;p>&lt;code>alpha&lt;/code>ëŠ” ë§¤ &lt;code>tick&lt;/code>ë§ˆë‹¤ &lt;code>alpha += (alphaTarget - alpha) * alphaDecay&lt;/code>ë¡œ ê³„ì‚°ë˜ì–´ ê°ì†Œí•©ë‹ˆë‹¤. ë˜í•œ, ë§¤ &lt;code>tick&lt;/code>ë§ˆë‹¤ &lt;code>alpha&lt;/code>ì™€ &lt;code>alphaMin&lt;/code>ë¥¼ ë¹„êµí•©ë‹ˆë‹¤. &lt;code>alpha&lt;/code>ê°€ &lt;code>alphaMin&lt;/code>ë³´ë‹¤ ì‘ì•„ì§ˆ ë•Œê¹Œì§€ simulationì„ ì‹¤í–‰í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">simulation.on('tick', () =&amp;gt; {
console.log(simulation.alpha());
// 001: 0.9772372209558107 = 1 + (0 - 1) * 0.02276277904418933;
// 002: 0.9549925860214359 = alpha + (alphaTarget - alpha) * alphaDecay
// ...
// 300: 0.0009999999999999966 ì¢…ë£Œ: alphaMin(0.001) ë¯¸ë§Œ
});
&lt;/code>&lt;/pre>
&lt;p>&lt;code>alphaTarget&lt;/code>ì€ &lt;code>alpha&lt;/code>ì˜ ë„ë‹¬ ëª©í‘œì…ë‹ˆë‹¤. &lt;code>alpha&lt;/code>ëŠ” &lt;code>alphaTarget&lt;/code>ì— ë„ë‹¬í•  ë•Œê¹Œì§€ ê°ì†Œí•©ë‹ˆë‹¤. &lt;code>alphaTarget&lt;/code>ì´ &lt;code>alphaMin&lt;/code>ë³´ë‹¤ í¬ë‹¤ë©´ &lt;code>alpha&lt;/code>ê°€ &lt;code>alphaMin&lt;/code>ì— ë„ë‹¬í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ simulationì€ ì¢…ë£Œë˜ì§€ ì•Šê³  ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. ë‚˜ì¤‘ì— d3-dragë¥¼ ì ìš©í•  ë•Œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ë˜ ì½”ë“œì—ì„œ &lt;code>alphaTarget&lt;/code>ìœ¼ë¡œ &lt;code>alpha&lt;/code>ê°€ &lt;code>1&lt;/code>ë¶€í„° &lt;code>0.5&lt;/code>ê¹Œì§€ ê°ì†Œí•˜ë„ë¡ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ &lt;code>alpha&lt;/code>ê°€ &lt;code>0.6&lt;/code> ë¯¸ë§Œìœ¼ë¡œ ê°ì†Œí–ˆì„ ë•Œ simulationì´ ì¢…ë£Œë˜ë¯€ë¡œ &lt;code>0.5&lt;/code>ê¹Œì§€ ê°ì†Œí•  ì¼ì€ ì—†ìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">simulation.alphaMin(0.6).alphaTarget(0.5);
simulation.on('tick', () =&amp;gt; {
console.log(simulation.alpha());
// 001: 0.9886186104779053
// 002: 0.9774962930107179
// ...
// 070: 0.5997631157484438 ì¢…ë£Œ: alphaMin(0.6) ë¯¸ë§Œ
});
&lt;/code>&lt;/pre>
&lt;p>ì•„ë˜ ì½”ë“œì—ì„  &lt;code>alpha&lt;/code>ê°€ &lt;code>0.4&lt;/code> ì´í•˜ë¡œ ê°ì†Œí•´ì•¼ë§Œ ì¢…ë£Œë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, &lt;code>alphaTarget&lt;/code>ì— ì˜í•´ &lt;code>0.4&lt;/code>ë³´ë‹¤ ì‘ì•„ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê³ ë¡œ, simulationì´ ì¢…ë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">simulation.alphaMin(0.4).alphaTarget(0.5);
simulation.on('tick', () =&amp;gt; {
console.log(simulation.alpha());
// 001: 0.9886186104779053
// 002: 0.9774962930107179
// ...
// 300: 0.5005000000000002
// 301: ì§„í–‰ ì¤‘...
});
&lt;/code>&lt;/pre>
&lt;p>&lt;code>alphaDecay&lt;/code>ëŠ” &lt;code>alpha&lt;/code>ì˜ ê°ì†ŒëŸ‰ì…ë‹ˆë‹¤. ìˆ˜ê°€ í´ìˆ˜ë¡ &lt;code>alpha&lt;/code>ëŠ” &lt;code>alphaMin&lt;/code>ì— ë¹ ë¥´ê²Œ ë„ë‹¬í•©ë‹ˆë‹¤.&lt;/p>
&lt;p>&lt;code>velocityDecay&lt;/code>ëŠ” &lt;code>node.vx&lt;/code>, &lt;code>node.vy&lt;/code> ê°’ì˜ ê°ì†ŒëŸ‰ì…ë‹ˆë‹¤. êµ¬í˜„ ì½”ë“œì—ì„  &lt;code>node.x += node.vx *= velocityDecay;&lt;/code>ë¡œ ì‘ì„±ë˜ì–´ ìˆëŠ”ë°, &lt;code>node.vx *= velocityDecay&lt;/code>ë¥¼ ë¨¼ì € ì—°ì‚°í•˜ê³  &lt;code>node.x += node.vx&lt;/code>ë¥¼ ì—°ì‚°í•©ë‹ˆë‹¤. &lt;code>0&lt;/code>ìœ¼ë¡œ ì„¤ì •í•˜ë©´ simulationì´ ì¢…ë£Œë  ë•Œê¹Œì§€ ì†ë„ë¥¼ ê³„ì† ìœ ì§€í•©ë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="forceshttpsgithubcomd3d3-forceforces">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#forces"
target="_blank" rel="noopener noreferrer nofollow"
>Forces&lt;/a
>
&lt;/h2>
&lt;p>ForcesëŠ” simulationì—ì„œ &lt;code>node&lt;/code>ì— ì ìš©í•  ë¬¼ë¦¬ì  í˜ì…ë‹ˆë‹¤. ì²™ë ¥ í˜¹ì€ ì¸ë ¥ì„ ì ìš©í•˜ê±°ë‚˜, ì¼ì • ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ê²Œë” í•©ë‹ˆë‹¤. ëª‡ê°€ì§€ ëª¨ë“ˆì„ ì´ìš©í•´ forceë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Links, many-body, centering, collision, positioningì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.&lt;/p>
&lt;h3 id="linkshttpsgithubcomd3d3-forcelinks">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#links"
target="_blank" rel="noopener noreferrer nofollow"
>Links&lt;/a
>
&lt;/h3>
&lt;p>Link forceëŠ” &lt;code>node&lt;/code>ë¥¼ ì—°ê²°í•˜ê³  ì¼ì • ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ëŠ” í˜ì…ë‹ˆë‹¤. ìœ„ì—ì„œ ì–¸ê¸‰í–ˆë“¯ &lt;code>simulation.force()&lt;/code>ì™€ &lt;code>d3.forceLink()&lt;/code>ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ &lt;code>distance&lt;/code>ì™€ &lt;code>strength&lt;/code>ë¥¼ ì´ìš©í•´ ê±°ë¦¬ì™€ ê±°ë¦¬ë¥¼ ìœ ì§€í•  í˜ì„ ê²°ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceLink = d3
.forceLink(links)
.id(({ id }) =&amp;gt; id)
.distance(100)
.strength(1);
simulation.force('link', forceLink);
&lt;/code>&lt;/pre>
&lt;p>&lt;code>strength&lt;/code>ëŠ” &lt;code>distance&lt;/code>ë¡œ ì„¤ì •í•œ ì¼ì • ê±°ë¦¬ë¥¼ ìœ ì§€í•˜ëŠ” í˜ì…ë‹ˆë‹¤. &lt;code>0&lt;/code>ë¶€í„° &lt;code>1&lt;/code> ì‚¬ì´ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤&lt;/p>
&lt;h3 id="many-bodyhttpsgithubcomd3d3-forcemany-body">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#many-body"
target="_blank" rel="noopener noreferrer nofollow"
>Many-Body&lt;/a
>
&lt;/h3>
&lt;p>Many Body forceëŠ” &lt;code>nodes&lt;/code>ì— ì²™ë ¥ í˜¹ì€ ì¸ë ¥ì„ ì ìš©í•©ë‹ˆë‹¤. &lt;code>simulation.force()&lt;/code>ì™€ &lt;code>d3.forceManyBody()&lt;/code>ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ì´ ë˜í•œ, &lt;code>strength&lt;/code>ë¡œ ì ìš©í•  í˜ì„ ê²°ì •í•©ë‹ˆë‹¤. ì „ë‹¬í•œ ìˆ˜ê°€ ì–‘ìˆ˜ë¼ë©´ ì¸ë ¥, ìŒìˆ˜ë¼ë©´ ì²™ë ¥ì…ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceManyBody = d3
.forceManyBody()
.strength(-300);
simulation.force('manyBody', forceManyBody);
&lt;/code>&lt;/pre>
&lt;p>ì°¸ê³ ë¡œ ë§ì€ ì˜ˆì‹œì—ì„œ &lt;code>force('manyBody', forceManyBody)&lt;/code>ê°€ ì•„ë‹Œ &lt;code>force('charge', forceCharge)&lt;/code>ë¡œ ë˜ì–´ìˆì§€ë§Œ ì´ë¦„ì€ ì „í˜€ ì¤‘ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ìˆœíˆ ì‹ë³„ì ì—­í• ì„ ìˆ˜í–‰í•˜ë¯€ë¡œ ë‹¤ë¥¸ forceì™€ êµ¬ë¶„ë§Œ ê°€ëŠ¥í•˜ë©´ ë©ë‹ˆë‹¤.&lt;/p>
&lt;h3 id="centeringhttpsgithubcomd3d3-forcecentering">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#centering"
target="_blank" rel="noopener noreferrer nofollow"
>Centering&lt;/a
>
&lt;/h3>
&lt;p>Centering forceëŠ” &lt;code>nodes&lt;/code>ì˜ ì¤‘ì‹¬ì´ ì§€ì •í•œ ì¢Œí‘œ(x, y)ì— ìœ„ì¹˜í•˜ë„ë¡ í•©ë‹ˆë‹¤. &lt;code>simulation.force()&lt;/code>ì™€ &lt;code>d3.forceCenter()&lt;/code>ë¡œ ìƒì„±í•©ë‹ˆë‹¤. Viewport ìƒì—ì„œ ì •ì¤‘ì•™ì— ìœ„ì¹˜í•´ì•¼ í•  ë•Œ ì ìš©í•©ë‹ˆë‹¤. &lt;code>strength&lt;/code>ë¥¼ ì´ìš©í•˜ë©´ ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceCenter = d3
.forceCenter(width / 2, height / 2)
.strength(0.1);
simulation.force('center', forceCenter);
&lt;/code>&lt;/pre>
&lt;p>&lt;code>resize&lt;/code> ì´ë²¤íŠ¸ í˜¹ì€ &lt;a
class="underline-lsre"
href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver"
target="_blank" rel="noopener noreferrer nofollow"
>ResizeObserver&lt;/a
>
ë¡œ í¬ê¸° ë³€ê²½ì„ ê°ì§€í•˜ê³  &lt;code>nodes&lt;/code>ê°€ í•­ìƒ ì¤‘ì•™ì— ìœ„ì¹˜í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;h3 id="collisionhttpsgithubcomd3d3-forcecollision">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#collision"
target="_blank" rel="noopener noreferrer nofollow"
>Collision&lt;/a
>
&lt;/h3>
&lt;p>Collision forceëŠ” &lt;code>nodes&lt;/code>ê°€ ì„œë¡œ ê²¹ì¹˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” í˜ì…ë‹ˆë‹¤. &lt;code>simulation.force()&lt;/code>ì™€ &lt;code>d3.forceCollide()&lt;/code>ë¡œ ìƒì„±í•©ë‹ˆë‹¤. &lt;code>node&lt;/code>ë¥¼ ì ì´ ì•„ë‹Œ ì›ìœ¼ë¡œ ì·¨ê¸‰í•˜ì—¬ ì¶©ëŒ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  &lt;code>radius&lt;/code>ë¡œ ì›ì˜ ë°˜ì§€ë¦„ì„ ê²°ì •í•©ë‹ˆë‹¤. &lt;code>strength&lt;/code>ë¡œ ê²¹ì¹  ë•Œ ì„œë¡œ ë°€ì–´ë‚¼ í˜ì„ ê²°ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceCollide = d3
.forceCollide()
.radius(5)
.strength(0.8);
simulation.force('collide', forceCollide);
&lt;/code>&lt;/pre>
&lt;h3 id="positioninghttpsgithubcomd3d3-forcepositioning">&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force#positioning"
target="_blank" rel="noopener noreferrer nofollow"
>Positioning&lt;/a
>
&lt;/h3>
&lt;p>Positioning forceëŠ” ì§€ì •í•œ ì¢Œí‘œ(x, y)ë¡œ &lt;code>nodes&lt;/code>ë¥¼ ë°€ì–´ë‚´ëŠ” í˜ì…ë‹ˆë‹¤. &lt;code>simulation.force()&lt;/code>ì™€ &lt;code>d3.forceX()&lt;/code> ê·¸ë¦¬ê³  &lt;code>d3.forceY()&lt;/code>ë¡œ ìƒì„±í•©ë‹ˆë‹¤. &lt;code>strength&lt;/code>ë¡œ ë°€ì–´ë‚´ëŠ” í˜ì„ ê²°ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceX = d3.forceX().strength(1);
const forceY = d3.forceY(height / 2);
simulation.force('x', forceX).force('y', forceY);
&lt;/code>&lt;/pre>
&lt;p>&lt;code>d3.forceRadial()&lt;/code> í•¨ìˆ˜ëŠ” ì›í˜•ì„ ê¸°ì¤€ìœ¼ë¡œ ë°€ì–´ë‚´ëŠ” í˜ì„ ìƒì„±í•©ë‹ˆë‹¤. &lt;code>strength&lt;/code>ë¡œ ë°€ì–´ë‚´ëŠ” í˜ì„ ê²°ì •í•©ë‹ˆë‹¤.&lt;/p>
&lt;pre>&lt;code class="language-js">const forceRadial = d3
.forceRadial(100, width / 2, height / 2)
.strength(0.5);
simulation.force('radial', forceRadial);
&lt;/code>&lt;/pre>
&lt;hr>
&lt;h2 id="conclusion">Conclusion&lt;/h2>
&lt;p>d3-forceì˜ ê°œë…ê³¼ ë™ì‘ ë°©ì‹ì„ ì½”ë“œì™€ í•¨ê»˜ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. d3-forceì˜ simulation, tickì„ ì¡°ì ˆí•  ìˆ˜ ìˆëŠ” alpha ê·¸ë¦¬ê³  forceì˜ ì¢…ë¥˜ì— ëŒ€í•´ì„œ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. ì²˜ìŒ ë³¼ ë• ì–´ë ¤ì›Œë³´ì¼ ìˆ˜ ìˆê² ì§€ë§Œ ì•Œì•„ì•¼ í•  ê°œë…ì´ ê·¸ë¦¬ ë§ì§€ ì•Šê³  ì´í•´í•˜ê¸° ì‰¬ìš´ ì½”ë“œì™€ íŒ¨í„´ìœ¼ë¡œ ê¸ˆë°© ìµí ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.&lt;/p>
&lt;p>ì•„ì§ d3-selectionë¥¼ ë‹¤ë£¨ì§€ ì•Šì•„ ê³„ì‚° ê²°ê³¼ê°’ìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë³´ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤ë§Œ, ë‹¤ìŒ ì‹œê°„ì— d3-selectionì„ í•™ìŠµí•˜ë©´ì„œ SVGë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë³´ê³  ì´í›„ d3-zoomê³¼ d3-dragë¥¼ ì ìš©í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.&lt;/p>
&lt;hr>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>&lt;a
class="underline-lsre"
href="https://github.com/d3/d3-force"
target="_blank" rel="noopener noreferrer nofollow"
>d3-force&lt;/a
>
&lt;/li>
&lt;li>&lt;a
class="underline-lsre"
href="https://stackoverflow.com/q/46426072/9735184"
target="_blank" rel="noopener noreferrer nofollow"
>What is the difference between alphaTarget and alphaMin?&lt;/a
>
&lt;/li>
&lt;/ul></description></item></channel></rss>